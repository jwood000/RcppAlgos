<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Sample the Cartesian Product — expandGridSample • RcppAlgos</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Sample the Cartesian Product — expandGridSample"><meta name="description" content="
Generate a specific (lexicographically) or random sample of the Cartesian product of the input vectors.
Produce results in parallel using the nThreads arguments.
GMP support allows for exploration where the number of results is large.

"><meta property="og:description" content="
Generate a specific (lexicographically) or random sample of the Cartesian product of the input vectors.
Produce results in parallel using the nThreads arguments.
GMP support allows for exploration where the number of results is large.

"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">RcppAlgos</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.9.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/CombinatorialSampling.html">Combinatorial Sampling and Ranking</a></li>
    <li><a class="dropdown-item" href="../articles/CombinatoricsIterators.html">Combinatorial Iterators in RcppAlgos</a></li>
    <li><a class="dropdown-item" href="../articles/CombPermConstraints.html">Constraints, Partitions, and Compositions</a></li>
    <li><a class="dropdown-item" href="../articles/ComputationalMathematics.html">Computational Mathematics Overview</a></li>
    <li><a class="dropdown-item" href="../articles/GeneralCombinatorics.html">Combination and Permutation Basics</a></li>
    <li><a class="dropdown-item" href="../articles/HighPerformanceBenchmarks.html">High Performance Benchmarks</a></li>
    <li><a class="dropdown-item" href="../articles/OtherCombinatorics.html">Cartesian Products and Partitions of Groups</a></li>
    <li><a class="dropdown-item" href="../articles/SubsetSum.html">Attacking Problems Related to the Subset Sum Problem</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jwood000/RcppAlgos/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Sample the Cartesian Product</h1>

      <div class="d-none name"><code>expandGridSample.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p></p><ul><li><p>Generate a specific (lexicographically) or random sample of the Cartesian product of the input vectors.</p></li>
<li><p>Produce results in parallel using the <code>nThreads</code> arguments.</p></li>
<li><p>GMP support allows for exploration where the number of results is large.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">expandGridSample</span><span class="op">(</span></span>
<span>    <span class="va">...</span>, n <span class="op">=</span> <span class="cn">NULL</span>, sampleVec <span class="op">=</span> <span class="cn">NULL</span>, seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    nThreads <span class="op">=</span> <span class="cn">NULL</span>, namedSample <span class="op">=</span> <span class="cn">FALSE</span>, return_df <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <p></p>
<dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>vectors, factors or a list containing these. (See <code><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">?expand.grid</a></code>).</p></dd>

  <dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>Number of results to return. The default is <code>NULL</code>.</p></dd>

  <dt id="arg-samplevec">sampleVec<a class="anchor" aria-label="anchor" href="#arg-samplevec"></a></dt>
<dd><p>A vector of numbers representing the lexicographical partition of groups to return. Accepts vectors of class <code>bigz</code> as well as vectors of characters</p></dd>

  <dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>Random seed initialization. The default is <code>NULL</code>. N.B. If the gmp library is needed, this parameter must be set in order to have reproducible results (<em>E.g</em> <code><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed()</a></code> has no effect in these cases).</p></dd>

  <dt id="arg-nthreads">nThreads<a class="anchor" aria-label="anchor" href="#arg-nthreads"></a></dt>
<dd><p>Specific number of threads to be used. The default is <code>NULL</code>.</p></dd>

  <dt id="arg-namedsample">namedSample<a class="anchor" aria-label="anchor" href="#arg-namedsample"></a></dt>
<dd><p>Logical flag. If <code>TRUE</code>, <code>rownames</code> corresponding to the lexicographical result, will be added to the returned matrix. The default is <code>FALSE</code>.</p></dd>

  <dt id="arg-return-df">return_df<a class="anchor" aria-label="anchor" href="#arg-return-df"></a></dt>
<dd><p>Logical flag to force the output to be a <code>data.frame</code>. The default is <code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>These algorithms rely on efficiently generating the \(n^{th}\) lexicographical result.</p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>When all of the input is of the same type, by default <code>expandGridSample</code> produces a <code>matrix</code> (a <code>data.frame</code> otherwise). This can be ignored by setting the argument <code>return_df = TRUE</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p><a href="https://en.wikipedia.org/wiki/Lexicographical_order" class="external-link">Lexicographical order</a></p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Joseph Wood</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## input vectors</span></span></span>
<span class="r-in"><span><span class="va">lst</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">state.abb</span><span class="op">)</span>, <span class="va">euro</span>, <span class="va">islands</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## generate 10 random products</span></span></span>
<span class="r-in"><span><span class="fu">expandGridSample</span><span class="op">(</span><span class="va">lst</span>, n <span class="op">=</span> <span class="fl">10</span>, seed <span class="op">=</span> <span class="fl">123</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Var1       Var2 Var3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    OK 1936.27000  306</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    OK   40.33990  306</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    WV    6.55957   13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    CO 1936.27000   73</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    AR    6.55957   30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    WI 1936.27000   29</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    CT    5.94573   25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8    MN   13.76030   33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9    GA   13.76030   84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10   IL   40.33990  227</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## using sampleVec to generate specific results</span></span></span>
<span class="r-in"><span><span class="fu">expandGridSample</span><span class="op">(</span><span class="va">lst</span>, sampleVec <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">100</span>, <span class="fl">1e3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Var1     Var2  Var3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   AL 13.76030 11506</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   AL  1.95583  2968</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   AK  2.20371    16</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="fu">expandGridSample</span><span class="op">(</span><span class="va">lst</span>, sampleVec <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="expandGridCount.html">expandGridCount</a></span><span class="op">(</span><span class="va">lst</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>         <span class="fu"><a href="expandGrid.html">expandGrid</a></span><span class="op">(</span><span class="va">lst</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Examples with enormous number of total results</span></span></span>
<span class="r-in"><span><span class="va">big_lst</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/funprog.html" class="external-link">Map</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="va">x</span><span class="op">:</span><span class="va">y</span>, <span class="fl">8</span><span class="op">:</span><span class="fl">33</span>, <span class="fl">15</span><span class="op">:</span><span class="fl">40</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">num</span> <span class="op">=</span> <span class="fu"><a href="expandGridCount.html">expandGridCount</a></span><span class="op">(</span><span class="va">big_lst</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">gmp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gmp/man/add.biginteger.html" class="external-link">log2.bigz</a></span><span class="op">(</span><span class="va">num</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 78</span>
<span class="r-in"><span><span class="co">## [1] 78</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">first</span> <span class="op">=</span> <span class="fu">gmp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gmp/man/biginteger.rand.html" class="external-link">urand.bigz</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">1</span>, size <span class="op">=</span> <span class="fl">78</span>, seed <span class="op">=</span> <span class="fl">123</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Seed initialisation</span>
<span class="r-in"><span><span class="va">mySamp</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">c</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">10</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">gmp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gmp/man/add.biginteger.html" class="external-link">add.bigz</a></span><span class="op">(</span><span class="va">first</span>, <span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">mySamp</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "bigz"</span>
<span class="r-in"><span><span class="co">## [1] "bigz"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## using the sampling function</span></span></span>
<span class="r-in"><span><span class="va">cartSamp</span> <span class="op">=</span> <span class="fu">expandGridSample</span><span class="op">(</span><span class="va">big_lst</span>, sampleVec <span class="op">=</span> <span class="va">mySamp</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## using the standard function</span></span></span>
<span class="r-in"><span><span class="va">cartGeneral</span> <span class="op">=</span> <span class="fu"><a href="expandGrid.html">expandGrid</a></span><span class="op">(</span><span class="va">big_lst</span>,</span></span>
<span class="r-in"><span>                         lower <span class="op">=</span> <span class="va">first</span>,</span></span>
<span class="r-in"><span>                         upper <span class="op">=</span> <span class="fu">gmp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gmp/man/add.biginteger.html" class="external-link">add.bigz</a></span><span class="op">(</span><span class="va">first</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">cartSamp</span>, <span class="va">cartGeneral</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="co">## [1] TRUE</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Joseph Wood.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

