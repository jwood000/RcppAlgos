<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Partition a Vector into Groups of Equal Size — comboGroups • RcppAlgos</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Partition a Vector into Groups of Equal Size — comboGroups" />
<meta property="og:description" content="
Generate partitions of a vector into groups of equal size. See Create Combinations in R by Groups on http://stackoverflow.com for a direct use case.
Produce results in parallel using the Parallel or nThreads arguments.
GMP support allows for exploration where the number of results is large.
The output is in lexicographical order by groups.

" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RcppAlgos</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.3.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/CombPermConstraints.html">Constraints, Integer Partitions, and Compositions</a>
    </li>
    <li>
      <a href="../articles/CombinatorialSampling.html">Combinatorial Sampling</a>
    </li>
    <li>
      <a href="../articles/ComputationalMathematics.html">Computational Mathematics Overview</a>
    </li>
    <li>
      <a href="../articles/GeneralCombinatorics.html">Combination and Permutation Basics</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/jwood000/RcppAlgos">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Partition a Vector into Groups of Equal Size</h1>
    
    <div class="hidden name"><code>comboGroups.Rd</code></div>
    </div>

    <div class="ref-description">
    <p></p><ul>
<li><p>Generate partitions of a vector into groups of equal size. See <a href='https://stackoverflow.com/q/57732672/4408538'>Create Combinations in R by Groups</a> on http://stackoverflow.com for a direct use case.</p></li>
<li><p>Produce results in parallel using the <code>Parallel</code> or <code>nThreads</code> arguments.</p></li>
<li><p>GMP support allows for exploration where the number of results is large.</p></li>
<li><p>The output is in lexicographical order by groups.</p></li>
</ul>

    </div>

    <pre class="usage"><span class='fu'>comboGroups</span>(<span class='no'>v</span>, <span class='no'>numGroups</span>, <span class='kw'>retType</span> <span class='kw'>=</span> <span class='st'>"matrix"</span>,
            <span class='kw'>lower</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>upper</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>Parallel</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
            <span class='kw'>nThreads</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>v</th>
      <td><p>Source vector. If <code>v</code> is an integer (including nonpositive integers), it will be converted to the sequence <code>1:v</code>. All atomic types are supported (See <code><a href='https://rdrr.io/r/base/is.recursive.html'>?is.atomic</a></code>).</p></td>
    </tr>
    <tr>
      <th>numGroups</th>
      <td><p>An Integer. The number of groups that the vector will be partitioned into. Must divide the length of v (if v is a vector) or v (if v is a scalar).</p></td>
    </tr>
    <tr>
      <th>retType</th>
      <td><p>A string, "3Darray" or "matrix", that determines the shape of the output. The default is "matrix".</p></td>
    </tr>
    <tr>
      <th>lower</th>
      <td><p>The lower bound. Partitions of groups are generated lexicographically, thus utilizing this argument will determine which specific result to start generating from (<em>e.g.</em> <code>comboGroups(8, 2, lower = 30)</code> is equivalent to <code>comboGroups(8, 2)[30:comboGroupsCount(8, 2), ]</code>). This argument along with <code>upper</code> is very useful for generating results in chunks allowing for easy parallelization.</p></td>
    </tr>
    <tr>
      <th>upper</th>
      <td><p>The upper bound. Similar to <code>lower</code>, however this parameter allows the user to <em>stop</em> generation at a specific result (<em>e.g.</em> <code>comboGroups(8, 2, upper = 5)</code> is equivalent to <code>comboGroups(8, 2)[1:5, ]</code>)</p></td>
    </tr>
    <tr>
      <th>Parallel</th>
      <td><p>Logical value indicating whether results should be generated in parallel using \(n - 1\) threads, where \(n\) is the maximum number of threads. The default is <code>FALSE</code>. If <code>nThreads</code> is not <code>NULL</code>, it will be given preference (<em>e.g.</em> if user has 8 threads with <code>Parallel = TRUE</code> and <code>nThreads = 4</code>, only 4 threads will be spawned). If your system is single-threaded, the arguments <code>Parallel</code> and <code>nThreads</code> are ignored.</p></td>
    </tr>
    <tr>
      <th>nThreads</th>
      <td><p>Specific number of threads to be used. The default is <code>NULL</code>. See <code>Parallel</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Conceptually, this problem can be viewed as generating all permutations of the vector <code>v</code> and removing the within group permutations. To illustrate this, let us consider the case of generating partitions of <code>1:8</code> in 2 groups of size 4.</p><ul>
<li><p>To begin, generate the permutations of <code>1:8</code> and group the first/last four elements of each row.
      <table class='table'>
<tr><td></td><td></td><td></td><td>Grp1</td><td></td><td></td><td>Grp2</td><td></td><td></td></tr>
<tr><td></td><td>C1</td><td>C2</td><td>C3</td><td>C4</td><td>C5</td><td>C6</td><td>C7</td><td>C8</td></tr>
<tr><td>R1</td><td>|1</td><td>2</td><td>3</td><td>4|</td><td>|5</td><td>6</td><td>7</td><td>8|</td></tr>
<tr><td>R2</td><td>|1</td><td>2</td><td>3</td><td>4|</td><td>|5</td><td>6</td><td>8</td><td>7|</td></tr>
<tr><td>R3</td><td>|1</td><td>2</td><td>3</td><td>4|</td><td>|5</td><td>7</td><td>6</td><td>8|</td></tr>
<tr><td>R4</td><td>|1</td><td>2</td><td>3</td><td>4|</td><td>|5</td><td>7</td><td>8</td><td>6|</td></tr>
<tr><td>R5</td><td>|1</td><td>2</td><td>3</td><td>4|</td><td>|5</td><td>8</td><td>6</td><td>7|</td></tr>
<tr><td>R6</td><td>|1</td><td>2</td><td>3</td><td>4|</td><td>|5</td><td>8</td><td>7</td><td>6|</td></tr>
</table></p></li>
<li><p>Note that the permutations above are equivalent partitions of 2 groups of size 4 as only the last four elements are permuted. If we look at at the \(25^{th}\) lexicographical permutation, we observe our second distinct partition.
      <table class='table'>
<tr><td></td><td></td><td></td><td>Grp1</td><td></td><td></td><td>Grp2</td><td></td><td></td></tr>
<tr><td></td><td>C1</td><td>C2</td><td>C3</td><td>C4</td><td>C5</td><td>C6</td><td>C7</td><td>C8</td></tr>
<tr><td>R24</td><td>|1</td><td>2</td><td>3</td><td>4|</td><td>|8</td><td>7</td><td>6</td><td>5|</td></tr>
<tr><td><strong>R25</strong></td><td><strong>|1</strong></td><td><strong>2</strong></td><td><strong>3</strong></td><td><strong>5|</strong></td><td><strong>|4</strong></td><td><strong>6</strong></td><td><strong>7</strong></td><td><strong>8|</strong></td></tr>
<tr><td>R26</td><td>|1</td><td>2</td><td>3</td><td>5|</td><td>|4</td><td>6</td><td>8</td><td>7|</td></tr>
<tr><td>R27</td><td>|1</td><td>2</td><td>3</td><td>5|</td><td>|4</td><td>7</td><td>6</td><td>8|</td></tr>
<tr><td>R28</td><td>|1</td><td>2</td><td>3</td><td>5|</td><td>|4</td><td>7</td><td>8</td><td>6|</td></tr>
</table></p></li>
<li><p>Continuing on, we will reach the \(3,457^{th}\) lexicographical permutation, which represents the last result:
      <table class='table'>
<tr><td></td><td></td><td></td><td>Grp1</td><td></td><td></td><td>Grp2</td><td></td><td></td></tr>
<tr><td></td><td>C1</td><td>C2</td><td>C3</td><td>C4</td><td>C5</td><td>C6</td><td>C7</td><td>C8</td></tr>
<tr><td>R3454</td><td>|1</td><td>6</td><td>7</td><td>5|</td><td>|8</td><td>3</td><td>4</td><td>2|</td></tr>
<tr><td>R3455</td><td>|1</td><td>6</td><td>7</td><td>5|</td><td>|8</td><td>4</td><td>2</td><td>3|</td></tr>
<tr><td>R3456</td><td>|1</td><td>6</td><td>7</td><td>5|</td><td>|8</td><td>4</td><td>3</td><td>2|</td></tr>
<tr><td><strong>R3457</strong></td><td><strong>|1</strong></td><td><strong>6</strong></td><td><strong>7</strong></td><td><strong>8|</strong></td><td><strong>|2</strong></td><td><strong>3</strong></td><td><strong>4</strong></td><td><strong>5|</strong></td></tr>
<tr><td>R3458</td><td>|1</td><td>6</td><td>7</td><td>8|</td><td>|2</td><td>3</td><td>5</td><td>4|</td></tr>
</table></p></li>
<li><p>For this small example, the method above will not be that computationally expensive. In fact, there are only 35 total partitions of <code>1:8</code> into 2 groups of size 4 out of a possible <code>factorial(8) = 40320</code> permutations. However, just doubling the size of the vector will make this approach infeasible as there are over 10 trillion permutations of <code>1:16</code>.</p></li>
<li><p>The algorithm in <code>comboGroups</code> avoids these duplicate partitions of groups by utlizing an efficient algorithm analogous to the <a href='https://en.cppreference.com/w/cpp/algorithm/next_permutation'>std::next_permutation</a> found in the standard algorithm library in C++.</p></li>
</ul>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>By default, a matrix is returned with column names corresponding to the associated group. If <code>retType = "3Darray"</code>, a 3D array is returned.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>The maximum number of partitions of groups that can be generated at one time is \(2^{31} - 1\). Utilizing <code>lower</code> and <code>upper</code> makes it possible to generate additional combinations/permutations.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## return a matrix</span>
<span class='fu'>comboGroups</span>(<span class='fl'>8</span>, <span class='fl'>2</span>)</div><div class='output co'>#&gt;       Grp1 Grp1 Grp1 Grp1 Grp2 Grp2 Grp2 Grp2
#&gt;  [1,]    1    2    3    4    5    6    7    8
#&gt;  [2,]    1    2    3    5    4    6    7    8
#&gt;  [3,]    1    2    3    6    4    5    7    8
#&gt;  [4,]    1    2    3    7    4    5    6    8
#&gt;  [5,]    1    2    3    8    4    5    6    7
#&gt;  [6,]    1    2    4    5    3    6    7    8
#&gt;  [7,]    1    2    4    6    3    5    7    8
#&gt;  [8,]    1    2    4    7    3    5    6    8
#&gt;  [9,]    1    2    4    8    3    5    6    7
#&gt; [10,]    1    2    5    6    3    4    7    8
#&gt; [11,]    1    2    5    7    3    4    6    8
#&gt; [12,]    1    2    5    8    3    4    6    7
#&gt; [13,]    1    2    6    7    3    4    5    8
#&gt; [14,]    1    2    6    8    3    4    5    7
#&gt; [15,]    1    2    7    8    3    4    5    6
#&gt; [16,]    1    3    4    5    2    6    7    8
#&gt; [17,]    1    3    4    6    2    5    7    8
#&gt; [18,]    1    3    4    7    2    5    6    8
#&gt; [19,]    1    3    4    8    2    5    6    7
#&gt; [20,]    1    3    5    6    2    4    7    8
#&gt; [21,]    1    3    5    7    2    4    6    8
#&gt; [22,]    1    3    5    8    2    4    6    7
#&gt; [23,]    1    3    6    7    2    4    5    8
#&gt; [24,]    1    3    6    8    2    4    5    7
#&gt; [25,]    1    3    7    8    2    4    5    6
#&gt; [26,]    1    4    5    6    2    3    7    8
#&gt; [27,]    1    4    5    7    2    3    6    8
#&gt; [28,]    1    4    5    8    2    3    6    7
#&gt; [29,]    1    4    6    7    2    3    5    8
#&gt; [30,]    1    4    6    8    2    3    5    7
#&gt; [31,]    1    4    7    8    2    3    5    6
#&gt; [32,]    1    5    6    7    2    3    4    8
#&gt; [33,]    1    5    6    8    2    3    4    7
#&gt; [34,]    1    5    7    8    2    3    4    6
#&gt; [35,]    1    6    7    8    2    3    4    5</div><div class='input'>
<span class='co'>## or a 3 dimensional array</span>
<span class='no'>temp</span> <span class='kw'>=</span> <span class='fu'>comboGroups</span>(<span class='fl'>8</span>, <span class='fl'>2</span>, <span class='st'>"3Darray"</span>)

<span class='co'>## view the first partition</span>
<span class='no'>temp</span>[<span class='fl'>1</span>, , ]</div><div class='output co'>#&gt;      Grp1 Grp2
#&gt; [1,]    1    5
#&gt; [2,]    2    6
#&gt; [3,]    3    7
#&gt; [4,]    4    8</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#note">Note</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Joseph Wood</p>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Joseph Wood.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


