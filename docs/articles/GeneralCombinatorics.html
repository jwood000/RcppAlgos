<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Combination and Permutation Basics • RcppAlgos243</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Combination and Permutation Basics">
<meta property="og:description" content="RcppAlgos243">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RcppAlgos243</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.4.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/CombPermConstraints.html">Constraints, Integer Partitions, and Compositions</a>
    </li>
    <li>
      <a href="../articles/CombinatorialSampling.html">Combinatorial Sampling</a>
    </li>
    <li>
      <a href="../articles/CombinatoricsIterators.html">Combinatorial Iterators in RcppAlgos</a>
    </li>
    <li>
      <a href="../articles/ComputationalMathematics.html">Computational Mathematics Overview</a>
    </li>
    <li>
      <a href="../articles/GeneralCombinatorics.html">Combination and Permutation Basics</a>
    </li>
    <li>
      <a href="../articles/HighPerformanceBenchmarks.html">High Performance Benchmarks</a>
    </li>
    <li>
      <a href="../articles/SubsetSum.html">Attacking Problems Related to the Subset Sum Problem</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jwood000/RcppAlgos/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Combination and Permutation Basics</h1>
                        <h4 data-toc-skip class="author">Joseph Wood</h4>
            
            <h4 data-toc-skip class="date">10/9/2019</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/jwood000/RcppAlgos/blob/HEAD/vignettes/GeneralCombinatorics.Rmd" class="external-link"><code>vignettes/GeneralCombinatorics.Rmd</code></a></small>
      <div class="hidden name"><code>GeneralCombinatorics.Rmd</code></div>

    </div>

    
    
<p>This document serves as an overview for attacking <em>common</em> combinatorial problems in <code>R</code>. One of the goals of <code>RcppAlgos</code> is to provide a comprehensive and accessible suite of functionality so that users can easily get to the heart of their problem. As a bonus, the functions in <code>RcppAlgos</code> are extremely efficient and are constantly being improved with every release.</p>
<p>It should be noted that this document only covers common problems. For more information on other combinatorial problems addressed by <code>RcppAlgos</code>, see the following vignettes:</p>
<ul>
<li><a href="https://jwood000.github.io/RcppAlgos/articles/CombinatorialSampling.html" class="external-link">Combinatorial Sampling</a></li>
<li><a href="https://jwood000.github.io/RcppAlgos/articles/CombPermConstraints.html" class="external-link">Constraints, Integer Partitions, and Compositions</a></li>
<li><a href="https://jwood000.github.io/RcppAlgos/articles/SubsetSum.html" class="external-link">Attacking Problems Related to the Subset Sum Problem</a></li>
<li><a href="https://jwood000.github.io/RcppAlgos/articles/CombinatoricsIterators.html" class="external-link">Combinatorial Iterators in RcppAlgos</a></li>
</ul>
<p>For much of the output below, we will be using the following function obtained here <a href="https://stackoverflow.com/a/11601162/4408538" class="external-link">combining head and tail methods in R</a> (credit to user <span class="citation">@flodel</span>)</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ht</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">d</span>, <span class="va">m</span> <span class="op">=</span> <span class="fl">5</span>, <span class="va">n</span> <span class="op">=</span> <span class="va">m</span><span class="op">)</span> <span class="op">{</span>
  <span class="co">## print the head and tail together</span>
  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"head --&gt;\n"</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">m</span><span class="op">)</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"--------\n"</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"tail --&gt;\n"</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">n</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<hr>
<div class="section level2">
<h2 id="introducing-combogeneral-and-permutegeneral">Introducing <code>comboGeneral</code> and <code>permuteGeneral</code><a class="anchor" aria-label="anchor" href="#introducing-combogeneral-and-permutegeneral"></a>
</h2>
<p>Easily executed with a very simple interface. The output is in <a href="https://en.wikipedia.org/wiki/Lexicographical_order" class="external-link">lexicographical order</a>.</p>
<p>We first look at getting results without repetition. You can pass an integer <em>n</em> and it will be converted to the sequence <code>1:n</code>, or you can pass any vector with an atomic type (i.e. <code>logical</code>, <code>integer</code>, <code>numeric</code>, <code>complex</code>, <code>character</code>, and <code>raw</code>).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RcppAlgos)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="do">## combn output for reference</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">combn</span>(<span class="dv">4</span>, <span class="dv">3</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>]</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">2</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]    <span class="dv">2</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">3</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,]    <span class="dv">3</span>    <span class="dv">4</span>    <span class="dv">4</span>    <span class="dv">4</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="do">## This is the same as combn expect the output is transposed</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="fu">comboGeneral</span>(<span class="dv">4</span>, <span class="dv">3</span>)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>]</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">4</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,]    <span class="dv">1</span>    <span class="dv">3</span>    <span class="dv">4</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,]    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">4</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="do">## Find all 3-tuple permutations without</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="do">## repetition of the numbers c(1, 2, 3, 4).</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">permuteGeneral</span>(<span class="dv">4</span>, <span class="dv">3</span>))</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>]</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">4</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,]    <span class="dv">1</span>    <span class="dv">3</span>    <span class="dv">2</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,]    <span class="dv">1</span>    <span class="dv">3</span>    <span class="dv">4</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>,]    <span class="dv">1</span>    <span class="dv">4</span>    <span class="dv">2</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>[<span class="dv">6</span>,]    <span class="dv">1</span>    <span class="dv">4</span>    <span class="dv">3</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="do">## If you don't specify m, the length of v (if v is a vector) or v (if v is a </span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a><span class="do">## scalar (see the examples above)) will be used</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">13</span>)</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a><span class="fu">comboGeneral</span>(v)</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>] [,<span class="dv">6</span>]</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,]    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">5</span>    <span class="dv">7</span>   <span class="dv">11</span>   <span class="dv">13</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">permuteGeneral</span>(v))</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>] [,<span class="dv">6</span>]</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,]    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">5</span>    <span class="dv">7</span>   <span class="dv">11</span>   <span class="dv">13</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">5</span>    <span class="dv">7</span>   <span class="dv">13</span>   <span class="dv">11</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,]    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">5</span>   <span class="dv">11</span>    <span class="dv">7</span>   <span class="dv">13</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,]    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">5</span>   <span class="dv">11</span>   <span class="dv">13</span>    <span class="dv">7</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>,]    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">5</span>   <span class="dv">13</span>    <span class="dv">7</span>   <span class="dv">11</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>[<span class="dv">6</span>,]    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">5</span>   <span class="dv">13</span>   <span class="dv">11</span>    <span class="dv">7</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a><span class="do">## They are very efficient...</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(<span class="fu">comboGeneral</span>(<span class="dv">25</span>, <span class="dv">12</span>))</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a> user  system elapsed </span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a><span class="fl">0.101</span>   <span class="fl">0.048</span>   <span class="fl">0.151</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a><span class="fu">comboCount</span>(<span class="dv">25</span>, <span class="dv">12</span>)</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">5200300</span></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a><span class="fu">ht</span>(<span class="fu">comboGeneral</span>(<span class="dv">25</span>, <span class="dv">12</span>))</span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>head <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>] [,<span class="dv">6</span>] [,<span class="dv">7</span>] [,<span class="dv">8</span>] [,<span class="dv">9</span>] [,<span class="dv">10</span>] [,<span class="dv">11</span>] [,<span class="dv">12</span>]</span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">4</span>    <span class="dv">5</span>    <span class="dv">6</span>    <span class="dv">7</span>    <span class="dv">8</span>    <span class="dv">9</span>    <span class="dv">10</span>    <span class="dv">11</span>    <span class="dv">12</span></span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">4</span>    <span class="dv">5</span>    <span class="dv">6</span>    <span class="dv">7</span>    <span class="dv">8</span>    <span class="dv">9</span>    <span class="dv">10</span>    <span class="dv">11</span>    <span class="dv">13</span></span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">4</span>    <span class="dv">5</span>    <span class="dv">6</span>    <span class="dv">7</span>    <span class="dv">8</span>    <span class="dv">9</span>    <span class="dv">10</span>    <span class="dv">11</span>    <span class="dv">14</span></span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">4</span>    <span class="dv">5</span>    <span class="dv">6</span>    <span class="dv">7</span>    <span class="dv">8</span>    <span class="dv">9</span>    <span class="dv">10</span>    <span class="dv">11</span>    <span class="dv">15</span></span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">4</span>    <span class="dv">5</span>    <span class="dv">6</span>    <span class="dv">7</span>    <span class="dv">8</span>    <span class="dv">9</span>    <span class="dv">10</span>    <span class="dv">11</span>    <span class="dv">16</span></span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a><span class="sc">--------</span></span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>tail <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>           [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>] [,<span class="dv">6</span>] [,<span class="dv">7</span>] [,<span class="dv">8</span>] [,<span class="dv">9</span>] [,<span class="dv">10</span>] [,<span class="dv">11</span>] [,<span class="dv">12</span>]</span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5200296</span>,]   <span class="dv">13</span>   <span class="dv">14</span>   <span class="dv">15</span>   <span class="dv">16</span>   <span class="dv">18</span>   <span class="dv">19</span>   <span class="dv">20</span>   <span class="dv">21</span>   <span class="dv">22</span>    <span class="dv">23</span>    <span class="dv">24</span>    <span class="dv">25</span></span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5200297</span>,]   <span class="dv">13</span>   <span class="dv">14</span>   <span class="dv">15</span>   <span class="dv">17</span>   <span class="dv">18</span>   <span class="dv">19</span>   <span class="dv">20</span>   <span class="dv">21</span>   <span class="dv">22</span>    <span class="dv">23</span>    <span class="dv">24</span>    <span class="dv">25</span></span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5200298</span>,]   <span class="dv">13</span>   <span class="dv">14</span>   <span class="dv">16</span>   <span class="dv">17</span>   <span class="dv">18</span>   <span class="dv">19</span>   <span class="dv">20</span>   <span class="dv">21</span>   <span class="dv">22</span>    <span class="dv">23</span>    <span class="dv">24</span>    <span class="dv">25</span></span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5200299</span>,]   <span class="dv">13</span>   <span class="dv">15</span>   <span class="dv">16</span>   <span class="dv">17</span>   <span class="dv">18</span>   <span class="dv">19</span>   <span class="dv">20</span>   <span class="dv">21</span>   <span class="dv">22</span>    <span class="dv">23</span>    <span class="dv">24</span>    <span class="dv">25</span></span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5200300</span>,]   <span class="dv">14</span>   <span class="dv">15</span>   <span class="dv">16</span>   <span class="dv">17</span>   <span class="dv">18</span>   <span class="dv">19</span>   <span class="dv">20</span>   <span class="dv">21</span>   <span class="dv">22</span>    <span class="dv">23</span>    <span class="dv">24</span>    <span class="dv">25</span></span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a><span class="do">## And for permutations... over 8 million instantly</span></span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(<span class="fu">permuteCount</span>(<span class="dv">13</span>, <span class="dv">7</span>))</span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a>user  system elapsed </span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a>   <span class="dv">0</span>       <span class="dv">0</span>       <span class="dv">0</span></span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a><span class="fu">permuteCount</span>(<span class="dv">13</span>, <span class="dv">7</span>)</span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">8648640</span></span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a><span class="fu">ht</span>(<span class="fu">permuteGeneral</span>(<span class="dv">13</span>, <span class="dv">7</span>))</span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a>head <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>] [,<span class="dv">6</span>] [,<span class="dv">7</span>]</span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">4</span>    <span class="dv">5</span>    <span class="dv">6</span>    <span class="dv">7</span></span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">4</span>    <span class="dv">5</span>    <span class="dv">6</span>    <span class="dv">8</span></span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">4</span>    <span class="dv">5</span>    <span class="dv">6</span>    <span class="dv">9</span></span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">4</span>    <span class="dv">5</span>    <span class="dv">6</span>   <span class="dv">10</span></span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">4</span>    <span class="dv">5</span>    <span class="dv">6</span>   <span class="dv">11</span></span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a><span class="sc">--------</span></span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a>tail <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a>           [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>] [,<span class="dv">6</span>] [,<span class="dv">7</span>]</span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a>[<span class="dv">8648636</span>,]   <span class="dv">13</span>   <span class="dv">12</span>   <span class="dv">11</span>   <span class="dv">10</span>    <span class="dv">9</span>    <span class="dv">8</span>    <span class="dv">3</span></span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a>[<span class="dv">8648637</span>,]   <span class="dv">13</span>   <span class="dv">12</span>   <span class="dv">11</span>   <span class="dv">10</span>    <span class="dv">9</span>    <span class="dv">8</span>    <span class="dv">4</span></span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a>[<span class="dv">8648638</span>,]   <span class="dv">13</span>   <span class="dv">12</span>   <span class="dv">11</span>   <span class="dv">10</span>    <span class="dv">9</span>    <span class="dv">8</span>    <span class="dv">5</span></span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a>[<span class="dv">8648639</span>,]   <span class="dv">13</span>   <span class="dv">12</span>   <span class="dv">11</span>   <span class="dv">10</span>    <span class="dv">9</span>    <span class="dv">8</span>    <span class="dv">6</span></span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a>[<span class="dv">8648640</span>,]   <span class="dv">13</span>   <span class="dv">12</span>   <span class="dv">11</span>   <span class="dv">10</span>    <span class="dv">9</span>    <span class="dv">8</span>    <span class="dv">7</span></span>
<span id="cb2-96"><a href="#cb2-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-97"><a href="#cb2-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-98"><a href="#cb2-98" aria-hidden="true" tabindex="-1"></a><span class="do">## Factors are preserved</span></span>
<span id="cb2-99"><a href="#cb2-99" aria-hidden="true" tabindex="-1"></a><span class="fu">permuteGeneral</span>(<span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">"low"</span>, <span class="st">"med"</span>, <span class="st">"high"</span>),</span>
<span id="cb2-100"><a href="#cb2-100" aria-hidden="true" tabindex="-1"></a>               <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"low"</span>, <span class="st">"med"</span>, <span class="st">"high"</span>),</span>
<span id="cb2-101"><a href="#cb2-101" aria-hidden="true" tabindex="-1"></a>               <span class="at">ordered =</span> <span class="cn">TRUE</span>))</span>
<span id="cb2-102"><a href="#cb2-102" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>]</span>
<span id="cb2-103"><a href="#cb2-103" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] low  med  high</span>
<span id="cb2-104"><a href="#cb2-104" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,] low  high med </span>
<span id="cb2-105"><a href="#cb2-105" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,] med  low  high</span>
<span id="cb2-106"><a href="#cb2-106" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,] med  high low </span>
<span id="cb2-107"><a href="#cb2-107" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>,] high low  med </span>
<span id="cb2-108"><a href="#cb2-108" aria-hidden="true" tabindex="-1"></a>[<span class="dv">6</span>,] high med  low </span>
<span id="cb2-109"><a href="#cb2-109" aria-hidden="true" tabindex="-1"></a>Levels<span class="sc">:</span> low <span class="sc">&lt;</span> med <span class="sc">&lt;</span> high</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="combinationspermutations-with-repetition">Combinations/Permutations with Repetition<a class="anchor" aria-label="anchor" href="#combinationspermutations-with-repetition"></a>
</h2>
<p>There are many problems in combinatorics which require finding combinations/permutations with repetition. This is easily achieved by setting <code>repetition</code> to <code>TRUE</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>fourDays <span class="ot">&lt;-</span> <span class="fu">weekdays</span>(<span class="fu">as.Date</span>(<span class="st">"2019-10-09"</span>) <span class="sc">+</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">3</span>, <span class="cn">TRUE</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ht</span>(<span class="fu">comboGeneral</span>(fourDays, <span class="at">repetition =</span> <span class="cn">TRUE</span>))</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>head <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>]  [,<span class="dv">2</span>]  [,<span class="dv">3</span>]  [,<span class="dv">4</span>] </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,] <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Thu"</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,] <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Fri"</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,] <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Sat"</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>,] <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Thu"</span> <span class="st">"Thu"</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="sc">--------</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>tail <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>      [,<span class="dv">1</span>]  [,<span class="dv">2</span>]  [,<span class="dv">3</span>]  [,<span class="dv">4</span>] </span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>[<span class="dv">31</span>,] <span class="st">"Fri"</span> <span class="st">"Fri"</span> <span class="st">"Fri"</span> <span class="st">"Fri"</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>[<span class="dv">32</span>,] <span class="st">"Fri"</span> <span class="st">"Fri"</span> <span class="st">"Fri"</span> <span class="st">"Sat"</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>[<span class="dv">33</span>,] <span class="st">"Fri"</span> <span class="st">"Fri"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>[<span class="dv">34</span>,] <span class="st">"Fri"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>[<span class="dv">35</span>,] <span class="st">"Sat"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="do">## When repetition = TRUE, m can exceed length(v)</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="fu">ht</span>(<span class="fu">comboGeneral</span>(fourDays, <span class="dv">8</span>, <span class="cn">TRUE</span>))</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>head <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>]  [,<span class="dv">2</span>]  [,<span class="dv">3</span>]  [,<span class="dv">4</span>]  [,<span class="dv">5</span>]  [,<span class="dv">6</span>]  [,<span class="dv">7</span>]  [,<span class="dv">8</span>] </span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,] <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Thu"</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,] <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Fri"</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,] <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Sat"</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>,] <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Wed"</span> <span class="st">"Thu"</span> <span class="st">"Thu"</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="sc">--------</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>tail <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>       [,<span class="dv">1</span>]  [,<span class="dv">2</span>]  [,<span class="dv">3</span>]  [,<span class="dv">4</span>]  [,<span class="dv">5</span>]  [,<span class="dv">6</span>]  [,<span class="dv">7</span>]  [,<span class="dv">8</span>] </span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>[<span class="dv">161</span>,] <span class="st">"Fri"</span> <span class="st">"Fri"</span> <span class="st">"Fri"</span> <span class="st">"Fri"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>[<span class="dv">162</span>,] <span class="st">"Fri"</span> <span class="st">"Fri"</span> <span class="st">"Fri"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>[<span class="dv">163</span>,] <span class="st">"Fri"</span> <span class="st">"Fri"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>[<span class="dv">164</span>,] <span class="st">"Fri"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>[<span class="dv">165</span>,] <span class="st">"Sat"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span> <span class="st">"Sat"</span></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>fibonacci <span class="ot">&lt;-</span> <span class="fu">c</span>(1L, 2L, 3L, 5L, 8L, 13L, 21L, 34L)</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>permsFib <span class="ot">&lt;-</span> <span class="fu">permuteGeneral</span>(fibonacci, <span class="dv">5</span>, <span class="cn">TRUE</span>)</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a><span class="fu">ht</span>(permsFib)</span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>head <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>]</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">2</span></span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,]    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">3</span></span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,]    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">5</span></span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>,]    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">8</span></span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a><span class="sc">--------</span></span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>tail <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>         [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>]</span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>[<span class="dv">32764</span>,]   <span class="dv">34</span>   <span class="dv">34</span>   <span class="dv">34</span>   <span class="dv">34</span>    <span class="dv">5</span></span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>[<span class="dv">32765</span>,]   <span class="dv">34</span>   <span class="dv">34</span>   <span class="dv">34</span>   <span class="dv">34</span>    <span class="dv">8</span></span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>[<span class="dv">32766</span>,]   <span class="dv">34</span>   <span class="dv">34</span>   <span class="dv">34</span>   <span class="dv">34</span>   <span class="dv">13</span></span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>[<span class="dv">32767</span>,]   <span class="dv">34</span>   <span class="dv">34</span>   <span class="dv">34</span>   <span class="dv">34</span>   <span class="dv">21</span></span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>[<span class="dv">32768</span>,]   <span class="dv">34</span>   <span class="dv">34</span>   <span class="dv">34</span>   <span class="dv">34</span>   <span class="dv">34</span></span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a><span class="do">## N.B. class is preserved</span></span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(fibonacci)</span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"integer"</span></span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(permsFib[<span class="dv">1</span>, ])</span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"integer"</span></span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a><span class="do">## Binary representation of all numbers from 0 to 1023</span></span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a><span class="fu">ht</span>(<span class="fu">permuteGeneral</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="dv">10</span>, T))</span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a>head <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>] [,<span class="dv">6</span>] [,<span class="dv">7</span>] [,<span class="dv">8</span>] [,<span class="dv">9</span>] [,<span class="dv">10</span>]</span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,]    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>     <span class="dv">0</span></span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>     <span class="dv">1</span></span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,]    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">1</span>     <span class="dv">0</span></span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,]    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">1</span>     <span class="dv">1</span></span>
<span id="cb3-74"><a href="#cb3-74" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>,]    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">1</span>    <span class="dv">0</span>     <span class="dv">0</span></span>
<span id="cb3-75"><a href="#cb3-75" aria-hidden="true" tabindex="-1"></a><span class="sc">--------</span></span>
<span id="cb3-76"><a href="#cb3-76" aria-hidden="true" tabindex="-1"></a>tail <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb3-77"><a href="#cb3-77" aria-hidden="true" tabindex="-1"></a>        [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>] [,<span class="dv">6</span>] [,<span class="dv">7</span>] [,<span class="dv">8</span>] [,<span class="dv">9</span>] [,<span class="dv">10</span>]</span>
<span id="cb3-78"><a href="#cb3-78" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1020</span>,]    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">0</span>    <span class="dv">1</span>     <span class="dv">1</span></span>
<span id="cb3-79"><a href="#cb3-79" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1021</span>,]    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">0</span>     <span class="dv">0</span></span>
<span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1022</span>,]    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">0</span>     <span class="dv">1</span></span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1023</span>,]    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>     <span class="dv">0</span></span>
<span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1024</span>,]    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">1</span>     <span class="dv">1</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="working-with-multisets">Working with Multisets<a class="anchor" aria-label="anchor" href="#working-with-multisets"></a>
</h2>
<p>Sometimes, the standard combination/permutation functions don’t quite get us to our desired goal. For example, one may need all permutations of a vector with some of the elements repeated a specific number of times (i.e. a multiset). Consider the following vector <code>a &lt;- c(1,1,1,1,2,2,2,7,7,7,7,7)</code> and one would like to find permutations of <code>a</code> of length 6. Using traditional methods, we would need to generate all permutations, then eliminate duplicate values. Even considering that <code>permuteGeneral</code> is very efficient, this approach is clunky and not as fast as it could be. Observe:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>getPermsWithSpecificRepetition <span class="ot">&lt;-</span> <span class="cf">function</span>(z, n) {</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    b <span class="ot">&lt;-</span> <span class="fu">permuteGeneral</span>(z, n)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    myDupes <span class="ot">&lt;-</span> <span class="fu">duplicated</span>(b)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    b[<span class="sc">!</span>myDupes, ]</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">7</span>,<span class="dv">7</span>,<span class="dv">7</span>,<span class="dv">7</span>,<span class="dv">7</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(test <span class="ot">&lt;-</span> <span class="fu">getPermsWithSpecificRepetition</span>(a, <span class="dv">6</span>))</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  user  system elapsed </span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a> <span class="fl">2.317</span>   <span class="fl">0.059</span>   <span class="fl">2.385</span></span></code></pre></div>
<div class="section level3">
<h3 id="enter-freqs">Enter <code>freqs</code><a class="anchor" aria-label="anchor" href="#enter-freqs"></a>
</h3>
<p>Situations like this call for the use of the <code>freqs</code> argument. Simply, enter the number of times each unique element is repeated and Voila!</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(test2 <span class="ot">&lt;-</span> <span class="fu">permuteGeneral</span>(<span class="fu">unique</span>(a), <span class="dv">6</span>, <span class="at">freqs =</span> <span class="fu">rle</span>(a)<span class="sc">$</span>lengths))</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a> user  system elapsed </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="dv">0</span>       <span class="dv">0</span>       <span class="dv">0</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(test, test2)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span></code></pre></div>
<p>Here are some more general examples with multisets:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Generate all permutations of a vector with specific</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="do">## length of repetition for each element (i.e. multiset)</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ht</span>(<span class="fu">permuteGeneral</span>(<span class="dv">3</span>, <span class="at">freqs =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>)))</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>head <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>]</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">3</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">2</span>    <span class="dv">3</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">3</span>    <span class="dv">2</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,]    <span class="dv">1</span>    <span class="dv">3</span>    <span class="dv">2</span>    <span class="dv">2</span>    <span class="dv">3</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>,]    <span class="dv">1</span>    <span class="dv">3</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">2</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="sc">--------</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>tail <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>      [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>]</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>[<span class="dv">26</span>,]    <span class="dv">3</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">1</span>    <span class="dv">2</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>[<span class="dv">27</span>,]    <span class="dv">3</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">2</span>    <span class="dv">1</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>[<span class="dv">28</span>,]    <span class="dv">3</span>    <span class="dv">3</span>    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">2</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>[<span class="dv">29</span>,]    <span class="dv">3</span>    <span class="dv">3</span>    <span class="dv">2</span>    <span class="dv">1</span>    <span class="dv">2</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>[<span class="dv">30</span>,]    <span class="dv">3</span>    <span class="dv">3</span>    <span class="dv">2</span>    <span class="dv">2</span>    <span class="dv">1</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="do">## or combinations of a certain length</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="fu">comboGeneral</span>(<span class="dv">3</span>, <span class="dv">2</span>, <span class="at">freqs =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>))</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>]</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">2</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]    <span class="dv">1</span>    <span class="dv">3</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,]    <span class="dv">2</span>    <span class="dv">2</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,]    <span class="dv">2</span>    <span class="dv">3</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>,]    <span class="dv">3</span>    <span class="dv">3</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="parallel-computing">Parallel Computing<a class="anchor" aria-label="anchor" href="#parallel-computing"></a>
</h2>
<p>Using the parameter <code>Parallel</code> or <code>nThreads</code>, we can generate combinations/permutations with greater efficiency.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(microbenchmark)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="do">## RcppAlgos uses the "number of threads available minus one" when Parallel is TRUE</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>RcppAlgos<span class="sc">::</span><span class="fu">stdThreadMax</span>()</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">8</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Compared to combn using 4 threads</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="fu">microbenchmark</span>(<span class="at">combn =</span> <span class="fu">combn</span>(<span class="dv">25</span>, <span class="dv">10</span>),</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">serAlgos =</span> <span class="fu">comboGeneral</span>(<span class="dv">25</span>, <span class="dv">10</span>),</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">parAlgos =</span> <span class="fu">comboGeneral</span>(<span class="dv">25</span>, <span class="dv">10</span>, <span class="at">nThreads =</span> <span class="dv">4</span>),</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">times =</span> <span class="dv">10</span>, </span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">unit =</span> <span class="st">"relative"</span>)</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>Unit<span class="sc">:</span> relative</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>     expr        min         lq      mean     median         uq       max neval</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    combn <span class="fl">140.873986</span> <span class="fl">143.411149</span> <span class="fl">66.043305</span> <span class="fl">128.898187</span> <span class="fl">120.543678</span> <span class="fl">18.503645</span>    <span class="dv">10</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a> serAlgos   <span class="fl">2.295844</span>   <span class="fl">2.302306</span>  <span class="fl">2.062132</span>   <span class="fl">2.117214</span>   <span class="fl">7.153547</span>  <span class="fl">1.080612</span>    <span class="dv">10</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a> parAlgos   <span class="fl">1.000000</span>   <span class="fl">1.000000</span>  <span class="fl">1.000000</span>   <span class="fl">1.000000</span>   <span class="fl">1.000000</span>  <span class="fl">1.000000</span>    <span class="dv">10</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a><span class="do">## Using 7 cores w/ Parallel = TRUE</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a><span class="fu">microbenchmark</span>(<span class="at">serial =</span> <span class="fu">comboGeneral</span>(<span class="dv">20</span>, <span class="dv">10</span>, <span class="at">freqs =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">5</span>)),</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>             <span class="at">parallel =</span> <span class="fu">comboGeneral</span>(<span class="dv">20</span>, <span class="dv">10</span>, <span class="at">freqs =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">5</span>), <span class="at">Parallel =</span> <span class="cn">TRUE</span>))</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>Unit<span class="sc">:</span> milliseconds</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>     expr       min         lq      mean     median         uq       max neval</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>   serial  <span class="fl">3.031987</span>   <span class="fl">2.990349</span>  <span class="fl">2.969633</span>   <span class="fl">3.000991</span>   <span class="fl">2.992326</span>  <span class="fl">2.014025</span>   <span class="dv">100</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a> parallel  <span class="fl">1.000000</span>   <span class="fl">1.000000</span>  <span class="fl">1.000000</span>   <span class="fl">1.000000</span>   <span class="fl">1.000000</span>  <span class="fl">1.000000</span>   <span class="dv">100</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2187</span>)</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>bigVec <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">sample</span>(<span class="dv">10</span><span class="sc">^</span><span class="dv">7</span>, <span class="dv">600</span>))</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a><span class="do">## Use it with any of the combinatorial functions</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(<span class="fu">permuteGeneral</span>(bigVec, <span class="dv">3</span>, <span class="at">Parallel =</span> T))</span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>  user  system elapsed</span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a> <span class="fl">1.067</span>   <span class="fl">3.645</span>   <span class="fl">0.902</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a><span class="fu">prettyNum</span>(<span class="fu">permuteCount</span>(bigVec, <span class="dv">3</span>), <span class="at">big.mark =</span> <span class="st">","</span>)</span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"214,921,200"</span></span></code></pre></div>
<div class="section level3">
<h3 id="using-arguments-lower-and-upper">Using arguments <code>lower</code> and <code>upper</code><a class="anchor" aria-label="anchor" href="#using-arguments-lower-and-upper"></a>
</h3>
<p>There are arguments <code>lower</code> and <code>upper</code> that can be utilized to generate chunks of combinations/permutations without having to generate all of them followed by subsetting. As the output is in lexicographical order, these arguments specify where to start and stop generating. For example, <code>comboGeneral(5, 3)</code> outputs 10 combinations of the vector <code>1:5</code> chosen 3 at a time. We can set <code>lower</code> to 5 in order to start generation from the <em>5<sup>th</sup></em> lexicographical combination. Similarly, we can set <code>upper</code> to 4 in order to only generate the first 4 combinations. We can also use them together to produce only a certain chunk of combinations. For example, setting <code>lower</code> to 4 and <code>upper</code> to 6 only produces the <em>4<sup>th</sup></em>, <em>5<sup>th</sup></em>, and <em>6<sup>th</sup></em> lexicographical combinations. Observe:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">comboGeneral</span>(<span class="dv">5</span>, <span class="dv">3</span>, <span class="at">lower =</span> <span class="dv">4</span>, <span class="at">upper =</span> <span class="dv">6</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>]</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">3</span>    <span class="dv">4</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]    <span class="dv">1</span>    <span class="dv">3</span>    <span class="dv">5</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,]    <span class="dv">1</span>    <span class="dv">4</span>    <span class="dv">5</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="do">## is equivalent to the following:</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="fu">comboGeneral</span>(<span class="dv">5</span>, <span class="dv">3</span>)[<span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>, ]</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>]</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">3</span>    <span class="dv">4</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]    <span class="dv">1</span>    <span class="dv">3</span>    <span class="dv">5</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,]    <span class="dv">1</span>    <span class="dv">4</span>    <span class="dv">5</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="generating-results-beyond--machineinteger-max">Generating Results Beyond <code>.Machine$integer.max</code><a class="anchor" aria-label="anchor" href="#generating-results-beyond--machineinteger-max"></a>
</h3>
<p>In addition to being useful by avoiding the unnecessary overhead of generating all combination/permutations followed by subsetting just to see a few specific results, <code>lower</code> and <code>upper</code> can be utilized to generate large number of combinations/permutations in parallel (see this <a href="https://stackoverflow.com/a/51595866/4408538" class="external-link">stackoverflow post</a> for a real use case). Observe:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Over 3 billion results</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">comboCount</span>(<span class="dv">35</span>, <span class="dv">15</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">3247943160</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 10086780 evenly divides 3247943160, otherwise you need to ensure that</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="do">## upper does not exceed the total number of results (E.g. see below, we</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="do">## would have "if ((x + foo) &gt; 3247943160) {myUpper = 3247943160}" where</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="do">## foo is the size of the increment you choose to use in seq()).</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(<span class="fu">lapply</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">3247943160</span>, <span class="dv">10086780</span>), <span class="cf">function</span>(x) {</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>     temp <span class="ot">&lt;-</span> <span class="fu">comboGeneral</span>(<span class="dv">35</span>, <span class="dv">15</span>, <span class="at">lower =</span> x, <span class="at">upper =</span> x <span class="sc">+</span> <span class="dv">10086779</span>)</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>     <span class="do">## do something</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>     x</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>}))</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>   user  system elapsed </span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a> <span class="fl">99.495</span>  <span class="fl">49.993</span> <span class="fl">149.467</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="do">## Enter parallel</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(parallel)</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(<span class="fu">mclapply</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">3247943160</span>, <span class="dv">10086780</span>), <span class="cf">function</span>(x) {</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>     temp <span class="ot">&lt;-</span> <span class="fu">comboGeneral</span>(<span class="dv">35</span>, <span class="dv">15</span>, <span class="at">lower =</span> x, <span class="at">upper =</span> x <span class="sc">+</span> <span class="dv">10086779</span>)</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>     <span class="do">## do something</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>     x</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>}, <span class="at">mc.cores =</span> <span class="dv">6</span>))</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>   user  system elapsed </span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a><span class="fl">125.361</span>  <span class="fl">85.916</span>  <span class="fl">35.641</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="gmp-support">GMP Support<a class="anchor" aria-label="anchor" href="#gmp-support"></a>
</h2>
<p>The arguments <code>lower</code> and <code>upper</code> are also useful when one needs to explore combinations/permutations where the number of results is large:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">222</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>myVec <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="do">## HUGE number of combinations</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="fu">comboCount</span>(myVec, <span class="dv">50</span>, <span class="at">repetition =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>Big <span class="fu">Integer</span> (<span class="st">'bigz'</span>) <span class="sc">:</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">109740941767310814894854141592555528130828577427079559745647393417766593803205094888320</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Let's look at one hundred thousand combinations in the range (1e15 + 1, 1e15 + 1e5)</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(b <span class="ot">&lt;-</span> <span class="fu">comboGeneral</span>(myVec, <span class="dv">50</span>, <span class="cn">TRUE</span>, </span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>                              <span class="at">lower =</span> <span class="fl">1e15</span> <span class="sc">+</span> <span class="dv">1</span>,</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>                              <span class="at">upper =</span> <span class="fl">1e15</span> <span class="sc">+</span> <span class="fl">1e5</span>))</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>   user  system elapsed </span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  <span class="fl">0.008</span>   <span class="fl">0.000</span>   <span class="fl">0.008</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>b[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">45</span><span class="sc">:</span><span class="dv">50</span>]</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>          [,<span class="dv">1</span>]      [,<span class="dv">2</span>]      [,<span class="dv">3</span>]     [,<span class="dv">4</span>]      [,<span class="dv">5</span>]       [,<span class="dv">6</span>]</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] <span class="fl">0.5454861</span> <span class="fl">0.4787456</span> <span class="fl">0.7797122</span> <span class="fl">2.004614</span> <span class="sc">-</span><span class="fl">1.257629</span> <span class="sc">-</span><span class="fl">0.7740501</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,] <span class="fl">0.5454861</span> <span class="fl">0.4787456</span> <span class="fl">0.7797122</span> <span class="fl">2.004614</span> <span class="sc">-</span><span class="fl">1.257629</span>  <span class="fl">0.1224679</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,] <span class="fl">0.5454861</span> <span class="fl">0.4787456</span> <span class="fl">0.7797122</span> <span class="fl">2.004614</span> <span class="sc">-</span><span class="fl">1.257629</span> <span class="sc">-</span><span class="fl">0.2033493</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,] <span class="fl">0.5454861</span> <span class="fl">0.4787456</span> <span class="fl">0.7797122</span> <span class="fl">2.004614</span> <span class="sc">-</span><span class="fl">1.257629</span>  <span class="fl">1.5511027</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>,] <span class="fl">0.5454861</span> <span class="fl">0.4787456</span> <span class="fl">0.7797122</span> <span class="fl">2.004614</span> <span class="sc">-</span><span class="fl">1.257629</span>  <span class="fl">1.0792094</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="user-defined-functions">User Defined Functions<a class="anchor" aria-label="anchor" href="#user-defined-functions"></a>
</h2>
<p>You can also pass user defined functions by utilizing the argument <code>FUN</code>. This feature’s main purpose is for convenience, however it is somewhat more efficient than generating all combinations/permutations and then using a function from the <code>apply</code> family (N.B. the argument <code>Parallel</code> has no effect when <code>FUN</code> is employed).</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>funCustomComb <span class="ot">=</span> <span class="cf">function</span>(n, r) {</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    combs <span class="ot">=</span> <span class="fu">comboGeneral</span>(n, r)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">lapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(combs), <span class="cf">function</span>(x) <span class="fu">cumprod</span>(combs[x,]))</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(<span class="fu">funCustomComb</span>(<span class="dv">15</span>, <span class="dv">8</span>), <span class="fu">comboGeneral</span>(<span class="dv">15</span>, <span class="dv">8</span>, <span class="at">FUN =</span> cumprod))</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="fu">microbenchmark</span>(<span class="at">f1 =</span> <span class="fu">funCustomComb</span>(<span class="dv">15</span>, <span class="dv">8</span>),</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">f2 =</span> <span class="fu">comboGeneral</span>(<span class="dv">15</span>, <span class="dv">8</span>, <span class="at">FUN =</span> cumprod), <span class="at">unit =</span> <span class="st">"relative"</span>)</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>unit<span class="sc">:</span> relative</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a> expr      min       lq     mean   median       uq      max neval</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>   f1 <span class="fl">6.948574</span> <span class="fl">6.955633</span> <span class="fl">6.960554</span> <span class="fl">6.961681</span> <span class="fl">6.515623</span> <span class="fl">9.688503</span>   <span class="dv">100</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>   f2 <span class="fl">1.000000</span> <span class="fl">1.000000</span> <span class="fl">1.000000</span> <span class="fl">1.000000</span> <span class="fl">1.000000</span> <span class="fl">1.000000</span>   <span class="dv">100</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="fu">comboGeneral</span>(<span class="dv">15</span>, <span class="dv">8</span>, <span class="at">FUN =</span> cumprod, <span class="at">upper =</span> <span class="dv">3</span>)</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]     <span class="dv">1</span>     <span class="dv">2</span>     <span class="dv">6</span>    <span class="dv">24</span>   <span class="dv">120</span>   <span class="dv">720</span>  <span class="dv">5040</span> <span class="dv">40320</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]     <span class="dv">1</span>     <span class="dv">2</span>     <span class="dv">6</span>    <span class="dv">24</span>   <span class="dv">120</span>   <span class="dv">720</span>  <span class="dv">5040</span> <span class="dv">45360</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">3</span>]]</span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]     <span class="dv">1</span>     <span class="dv">2</span>     <span class="dv">6</span>    <span class="dv">24</span>   <span class="dv">120</span>   <span class="dv">720</span>  <span class="dv">5040</span> <span class="dv">50400</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a><span class="do">## An example involving the powerset</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a><span class="fu">unlist</span>(<span class="fu">comboGeneral</span>(<span class="fu">c</span>(<span class="st">""</span>, letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]), <span class="dv">3</span>, </span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>                    <span class="at">freqs =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">3</span>)),</span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>                    <span class="at">FUN =</span> <span class="cf">function</span>(x) <span class="fu">paste0</span>(x, <span class="at">collapse =</span> <span class="st">""</span>)))</span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"a"</span>   <span class="st">"b"</span>   <span class="st">"c"</span>   <span class="st">"ab"</span>  <span class="st">"ac"</span>  <span class="st">"bc"</span>  <span class="st">"abc"</span></span></code></pre></div>
<hr>
</div>
<div class="section level2">
<h2 id="cartesian-product-where-order-does-not-matter">Cartesian Product where Order does not Matter<a class="anchor" aria-label="anchor" href="#cartesian-product-where-order-does-not-matter"></a>
</h2>
<p>Given a list of vectors, <em>v<sub>1</sub></em>, <em>v<sub>2</sub></em>, … , <em>v<sub>n</sub></em>, where the intersection of two or more vectors in non-empty, find all unique combinations (order does not matter) of elements of the cartesian product of all of the vectors.</p>
<p>For example, lets say we have: <code>v1 = 1:4</code> and <code>v2 = 2:5</code>. The cartestion product is given by <code>expand.grid(v1, v2)</code>:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">expand.grid</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>   Var1 Var2</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">1</span>    <span class="dv">2</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>     <span class="dv">2</span>    <span class="dv">2</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">3</span>    <span class="dv">2</span>  <span class="ot">&lt;-</span><span class="sc">-</span> Same as row <span class="dv">6</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>     <span class="dv">4</span>    <span class="dv">2</span>  <span class="ot">&lt;-</span><span class="sc">-</span> Same as row <span class="dv">10</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>     <span class="dv">1</span>    <span class="dv">3</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>     <span class="dv">2</span>    <span class="dv">3</span>  <span class="ot">&lt;-</span><span class="sc">-</span> Same as row <span class="dv">3</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>     <span class="dv">3</span>    <span class="dv">3</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>     <span class="dv">4</span>    <span class="dv">3</span>  <span class="ot">&lt;-</span><span class="sc">-</span> Same as row <span class="dv">11</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="dv">9</span>     <span class="dv">1</span>    <span class="dv">4</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>    <span class="dv">2</span>    <span class="dv">4</span>  <span class="ot">&lt;-</span><span class="sc">-</span> Same as row <span class="dv">4</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span>    <span class="dv">3</span>    <span class="dv">4</span>  <span class="ot">&lt;-</span><span class="sc">-</span> Same as row <span class="dv">8</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="dv">12</span>    <span class="dv">4</span>    <span class="dv">4</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="dv">13</span>    <span class="dv">1</span>    <span class="dv">5</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="dv">14</span>    <span class="dv">2</span>    <span class="dv">5</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="dv">15</span>    <span class="dv">3</span>    <span class="dv">5</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="dv">16</span>    <span class="dv">4</span>    <span class="dv">5</span></span></code></pre></div>
<p>If we don’t care about order, the following row pairs are considered equal and can therefore be pruned to obtain our desired results:</p>
<ul>
<li>(r3, r6)</li>
<li>(r4, r10)</li>
<li>(r8, r11)</li>
</ul>
<p>With <code>comboGrid</code> no duplicates are generated:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">comboGrid</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>      Var1 Var2</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">2</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a> [<span class="dv">2</span>,]    <span class="dv">1</span>    <span class="dv">3</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a> [<span class="dv">3</span>,]    <span class="dv">1</span>    <span class="dv">4</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a> [<span class="dv">4</span>,]    <span class="dv">1</span>    <span class="dv">5</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a> [<span class="dv">5</span>,]    <span class="dv">2</span>    <span class="dv">2</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a> [<span class="dv">6</span>,]    <span class="dv">2</span>    <span class="dv">3</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>,]    <span class="dv">2</span>    <span class="dv">4</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a> [<span class="dv">8</span>,]    <span class="dv">2</span>    <span class="dv">5</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a> [<span class="dv">9</span>,]    <span class="dv">3</span>    <span class="dv">3</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">10</span>,]    <span class="dv">3</span>    <span class="dv">4</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>[<span class="dv">11</span>,]    <span class="dv">3</span>    <span class="dv">5</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>[<span class="dv">12</span>,]    <span class="dv">4</span>    <span class="dv">4</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>[<span class="dv">13</span>,]    <span class="dv">4</span>    <span class="dv">5</span></span></code></pre></div>
<p>Note that the order of <code>expand.grid</code> and <code>comboGrid</code> differ. The order of <code>comboGrid</code> is lexicographical meaning that the last column will vary the fastest whereas with <code>expand.grid</code>, the first column will vary the fastest.</p>
<p>You will also note that the output of <code>expand.grid</code> is a <code>data.frame</code> whereas with <code>comboGrid</code>, we get a <code>matrix</code>. With <code>comboGrid</code>, we only get a <code>data.frame</code> when the classes of each vector are different as generally speaking, working with matrices is preferrable.</p>
<p>With the small example above, we only had to filter out 3 out of 16 total results (less than 20%). That isn’t that bad. If this was the general case, we might as well just stick with <code>expand.grid</code> as it is very efficient. Unfortunately, this is not the general case and as the number of vectors with overlap increases, filtering will become impractical.</p>
<p>Consider the following example:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>pools <span class="ot">=</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">14</span>, <span class="dv">6</span>),</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>             <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">3</span>, <span class="dv">11</span>, <span class="dv">12</span>),</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>             <span class="fu">c</span>(<span class="dv">11</span>, <span class="dv">3</span>, <span class="dv">13</span>, <span class="dv">4</span>, <span class="dv">15</span>, <span class="dv">8</span>, <span class="dv">6</span>, <span class="dv">5</span>),</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>             <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">9</span>, <span class="dv">5</span>,  <span class="dv">7</span>),</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>             <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">3</span>, <span class="dv">8</span>, <span class="dv">14</span>),</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>             <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">3</span>, <span class="dv">7</span>, <span class="dv">10</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">8</span>, <span class="dv">6</span>),</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>             <span class="fu">c</span>(<span class="dv">14</span>, <span class="dv">9</span>, <span class="dv">11</span>, <span class="dv">15</span>),</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>             <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">6</span>, <span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">9</span>, <span class="dv">4</span>),</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>             <span class="fu">c</span>(<span class="dv">6</span>,  <span class="dv">3</span>,  <span class="dv">2</span>, <span class="dv">14</span>,  <span class="dv">7</span>, <span class="dv">12</span>,  <span class="dv">9</span>),</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>             <span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">11</span>,  <span class="dv">2</span>,  <span class="dv">5</span>, <span class="dv">15</span>,  <span class="dv">7</span>))</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="do">## If we used expand.grid, we would have to filter</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="do">## more than 100 million results</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="fu">prod</span>(<span class="fu">lengths</span>(pools))</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">101154816</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="do">## With comboGrid, this is no problem</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(myCombs <span class="ot">&lt;-</span> <span class="fu">comboGrid</span>(pools))</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>   user  system elapsed </span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>  <span class="fl">0.958</span>   <span class="fl">0.069</span>   <span class="fl">1.027</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">object.size</span>(myCombs), <span class="at">unit =</span> <span class="st">"Mb"</span>)</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a><span class="dv">92</span> Mb</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a><span class="fu">ht</span>(myCombs)</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>head <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>     Var1 Var2 Var3 Var4 Var5 Var6 Var7 Var8 Var9 Var10</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">3</span>    <span class="dv">9</span>    <span class="dv">4</span>    <span class="dv">2</span>     <span class="dv">2</span></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">3</span>    <span class="dv">9</span>    <span class="dv">4</span>    <span class="dv">2</span>     <span class="dv">5</span></span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">3</span>    <span class="dv">9</span>    <span class="dv">4</span>    <span class="dv">2</span>     <span class="dv">6</span></span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">3</span>    <span class="dv">9</span>    <span class="dv">4</span>    <span class="dv">2</span>     <span class="dv">7</span></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">3</span>    <span class="dv">9</span>    <span class="dv">4</span>    <span class="dv">2</span>    <span class="dv">11</span></span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a><span class="sc">--------</span></span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>tail <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a>           Var1 Var2 Var3 Var4 Var5 Var6 Var7 Var8 Var9 Var10</span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1205736</span>,]   <span class="dv">14</span>   <span class="dv">12</span>   <span class="dv">15</span>   <span class="dv">10</span>   <span class="dv">14</span>   <span class="dv">15</span>   <span class="dv">15</span>   <span class="dv">11</span>   <span class="dv">12</span>    <span class="dv">15</span></span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1205737</span>,]   <span class="dv">14</span>   <span class="dv">12</span>   <span class="dv">15</span>   <span class="dv">10</span>   <span class="dv">14</span>   <span class="dv">15</span>   <span class="dv">15</span>   <span class="dv">13</span>   <span class="dv">12</span>    <span class="dv">15</span></span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1205738</span>,]   <span class="dv">14</span>   <span class="dv">12</span>   <span class="dv">15</span>   <span class="dv">10</span>   <span class="dv">14</span>   <span class="dv">15</span>   <span class="dv">15</span>   <span class="dv">13</span>   <span class="dv">14</span>    <span class="dv">15</span></span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1205739</span>,]   <span class="dv">14</span>   <span class="dv">12</span>   <span class="dv">15</span>   <span class="dv">10</span>   <span class="dv">14</span>   <span class="dv">15</span>   <span class="dv">15</span>   <span class="dv">14</span>   <span class="dv">12</span>    <span class="dv">15</span></span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1205740</span>,]   <span class="dv">14</span>   <span class="dv">12</span>   <span class="dv">15</span>   <span class="dv">10</span>   <span class="dv">14</span>   <span class="dv">15</span>   <span class="dv">15</span>   <span class="dv">14</span>   <span class="dv">14</span>    <span class="dv">15</span></span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a><span class="do">## This is just the time to create the cartesian product</span></span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a><span class="do">## Generating keys, then filtering will take much more time</span></span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(cartProd <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(pools))</span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a>   user  system elapsed </span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a>  <span class="fl">7.531</span>   <span class="fl">2.899</span>  <span class="fl">10.431</span></span>
<span id="cb14-48"><a href="#cb14-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-49"><a href="#cb14-49" aria-hidden="true" tabindex="-1"></a><span class="do">## Creates huge object</span></span>
<span id="cb14-50"><a href="#cb14-50" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">object.size</span>(cartProd), <span class="at">unit =</span> <span class="st">"Mb"</span>)</span>
<span id="cb14-51"><a href="#cb14-51" aria-hidden="true" tabindex="-1"></a><span class="fl">7717.5</span> Mb</span>
<span id="cb14-52"><a href="#cb14-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-53"><a href="#cb14-53" aria-hidden="true" tabindex="-1"></a><span class="do">## What if we want results with unique values... </span></span>
<span id="cb14-54"><a href="#cb14-54" aria-hidden="true" tabindex="-1"></a><span class="do">## Simply set repetition = FALSE</span></span>
<span id="cb14-55"><a href="#cb14-55" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(myCombs <span class="ot">&lt;-</span> <span class="fu">comboGrid</span>(pools, <span class="at">repetition =</span> <span class="cn">FALSE</span>))</span>
<span id="cb14-56"><a href="#cb14-56" aria-hidden="true" tabindex="-1"></a>   user  system elapsed </span>
<span id="cb14-57"><a href="#cb14-57" aria-hidden="true" tabindex="-1"></a>  <span class="fl">0.029</span>   <span class="fl">0.007</span>   <span class="fl">0.035</span></span>
<span id="cb14-58"><a href="#cb14-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-59"><a href="#cb14-59" aria-hidden="true" tabindex="-1"></a><span class="fu">ht</span>(myCombsNoRep)</span>
<span id="cb14-60"><a href="#cb14-60" aria-hidden="true" tabindex="-1"></a>head <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb14-61"><a href="#cb14-61" aria-hidden="true" tabindex="-1"></a>     Var1 Var2 Var3 Var4 Var5 Var6 Var7 Var8 Var9 Var10</span>
<span id="cb14-62"><a href="#cb14-62" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">5</span>    <span class="dv">8</span>    <span class="dv">4</span>    <span class="dv">9</span>    <span class="dv">6</span>    <span class="dv">7</span>    <span class="dv">11</span></span>
<span id="cb14-63"><a href="#cb14-63" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">5</span>    <span class="dv">8</span>    <span class="dv">4</span>    <span class="dv">9</span>    <span class="dv">6</span>    <span class="dv">7</span>    <span class="dv">15</span></span>
<span id="cb14-64"><a href="#cb14-64" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">5</span>    <span class="dv">8</span>    <span class="dv">4</span>    <span class="dv">9</span>    <span class="dv">6</span>   <span class="dv">12</span>     <span class="dv">7</span></span>
<span id="cb14-65"><a href="#cb14-65" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">5</span>    <span class="dv">8</span>    <span class="dv">4</span>    <span class="dv">9</span>    <span class="dv">6</span>   <span class="dv">12</span>    <span class="dv">11</span></span>
<span id="cb14-66"><a href="#cb14-66" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>,]    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">5</span>    <span class="dv">8</span>    <span class="dv">4</span>    <span class="dv">9</span>    <span class="dv">6</span>   <span class="dv">12</span>    <span class="dv">15</span></span>
<span id="cb14-67"><a href="#cb14-67" aria-hidden="true" tabindex="-1"></a><span class="sc">--------</span></span>
<span id="cb14-68"><a href="#cb14-68" aria-hidden="true" tabindex="-1"></a>tail <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb14-69"><a href="#cb14-69" aria-hidden="true" tabindex="-1"></a>        Var1 Var2 Var3 Var4 Var5 Var6 Var7 Var8 Var9 Var10</span>
<span id="cb14-70"><a href="#cb14-70" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2977</span>,]   <span class="dv">14</span>    <span class="dv">3</span>    <span class="dv">4</span>    <span class="dv">5</span>    <span class="dv">8</span>   <span class="dv">15</span>    <span class="dv">9</span>   <span class="dv">13</span>   <span class="dv">12</span>    <span class="dv">11</span></span>
<span id="cb14-71"><a href="#cb14-71" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2978</span>,]   <span class="dv">14</span>    <span class="dv">3</span>    <span class="dv">4</span>    <span class="dv">7</span>    <span class="dv">5</span>   <span class="dv">15</span>    <span class="dv">9</span>   <span class="dv">13</span>   <span class="dv">12</span>    <span class="dv">11</span></span>
<span id="cb14-72"><a href="#cb14-72" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2979</span>,]   <span class="dv">14</span>    <span class="dv">3</span>    <span class="dv">4</span>    <span class="dv">7</span>    <span class="dv">8</span>   <span class="dv">15</span>    <span class="dv">9</span>   <span class="dv">13</span>   <span class="dv">12</span>    <span class="dv">11</span></span>
<span id="cb14-73"><a href="#cb14-73" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2980</span>,]   <span class="dv">14</span>    <span class="dv">3</span>    <span class="dv">5</span>    <span class="dv">7</span>    <span class="dv">8</span>   <span class="dv">15</span>    <span class="dv">9</span>   <span class="dv">13</span>   <span class="dv">12</span>    <span class="dv">11</span></span>
<span id="cb14-74"><a href="#cb14-74" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2981</span>,]   <span class="dv">14</span>    <span class="dv">4</span>    <span class="dv">5</span>    <span class="dv">7</span>    <span class="dv">8</span>   <span class="dv">15</span>    <span class="dv">9</span>   <span class="dv">13</span>   <span class="dv">12</span>    <span class="dv">11</span></span></code></pre></div>
<p>The function <code>comboGrid</code> was highly inspired by the following question on stackoverflow:</p>
<ul>
<li><a href="https://stackoverflow.com/q/51834467/4408538" class="external-link">Picking unordered combinations from pools with overlap</a></li>
</ul>
<p>Currenlty, the underlying algorithm is not the gold standard. By that, we mean that results are not generated one by one. Efforts are underway to achieve this, but up until this point it has proven quite difficult (See the comprehensive answer by Tim Peters (yes, that <a href="https://stackoverflow.com/users/2705542/tim-peters" class="external-link">Tim Peters</a>)).</p>
<p>The algorithm in <code>comboGrid</code> leverages <a href="https://en.wikipedia.org/wiki/Fundamental_theorem_of_arithmetic" class="external-link">The Fundamental Theorem of Arithmetic</a> to efficiently generate keys that will be used in a hash function to determine if a particular combination of elements have been encountered. For greater efficiency, we make use of deduplication as <a href="https://stackoverflow.com/a/51886857/4408538" class="external-link">user2357112</a> suggests.</p>
</div>
<div class="section level2">
<h2 id="partitions-of-groups-of-equal-size-with-combogroups">Partitions of Groups of Equal Size with <code>comboGroups</code><a class="anchor" aria-label="anchor" href="#partitions-of-groups-of-equal-size-with-combogroups"></a>
</h2>
<p>Given a vector of length <em>n</em> and <em>k</em> groups, where <em>k</em> divides <em>n</em>, each group is comprised of a combination of the vector chosen <em>g = n / k</em> at a time. As is stated in the documentation (see <code><a href="../reference/comboGroups.html">?comboGroups</a></code>), these can be constructed by first generating all permutations of the vector and subsequently removing entries with permuted groups. Let us consider the following example. Given <code>v = 1:12</code>, generate all partitions <code>v</code> into 3 groups each of size 4.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>funBruteGrp <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">myLow =</span> <span class="dv">1</span>, myUp) {</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    mat <span class="ot">&lt;-</span> <span class="fu">do.call</span>(rbind, <span class="fu">permuteGeneral</span>(<span class="dv">12</span>, <span class="at">lower =</span> myLow, <span class="at">upper =</span> myUp,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">FUN =</span> <span class="cf">function</span>(x) {</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sapply</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">8</span>, <span class="dv">4</span>), <span class="cf">function</span>(y) {</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">paste0</span>(<span class="fu">c</span>(<span class="st">"("</span>, x[(y <span class="sc">+</span> <span class="dv">1</span>)<span class="sc">:</span>(y <span class="sc">+</span> <span class="dv">4</span>)], <span class="st">")"</span>), <span class="at">collapse =</span> <span class="st">" "</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    }))</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">colnames</span>(mat) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"Grp"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames</span>(mat) <span class="ot">&lt;-</span> myLow<span class="sc">:</span>myUp</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    mat</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="do">## All of these are the same as only the 3rd group is being permuted</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="fu">funBruteGrp</span>(<span class="at">myUp =</span> <span class="dv">6</span>)</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>  Grp1          Grp2          Grp3            </span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="st">"( 1 2 3 4 )"</span> <span class="st">"( 5 6 7 8 )"</span> <span class="st">"( 9 10 11 12 )"</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="st">"( 1 2 3 4 )"</span> <span class="st">"( 5 6 7 8 )"</span> <span class="st">"( 9 10 12 11 )"</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="st">"( 1 2 3 4 )"</span> <span class="st">"( 5 6 7 8 )"</span> <span class="st">"( 9 11 10 12 )"</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="st">"( 1 2 3 4 )"</span> <span class="st">"( 5 6 7 8 )"</span> <span class="st">"( 9 11 12 10 )"</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="st">"( 1 2 3 4 )"</span> <span class="st">"( 5 6 7 8 )"</span> <span class="st">"( 9 12 10 11 )"</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span> <span class="st">"( 1 2 3 4 )"</span> <span class="st">"( 5 6 7 8 )"</span> <span class="st">"( 9 12 11 10 )"</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a><span class="do">## We found our second distinct partition</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a><span class="fu">funBruteGrp</span>(<span class="at">myLow =</span> <span class="dv">23</span>, <span class="at">myUp =</span> <span class="dv">26</span>)</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>   Grp1          Grp2          Grp3            </span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a><span class="dv">23</span> <span class="st">"( 1 2 3 4 )"</span> <span class="st">"( 5 6 7 8 )"</span> <span class="st">"( 12 11 9 10 )"</span></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a><span class="dv">24</span> <span class="st">"( 1 2 3 4 )"</span> <span class="st">"( 5 6 7 8 )"</span> <span class="st">"( 12 11 10 9 )"</span></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a><span class="dv">25</span> <span class="st">"( 1 2 3 4 )"</span> <span class="st">"( 5 6 7 9 )"</span> <span class="st">"( 8 10 11 12 )"</span>  <span class="do">## &lt;&lt;-- 2nd distinct partition of groups</span></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a><span class="dv">26</span> <span class="st">"( 1 2 3 4 )"</span> <span class="st">"( 5 6 7 9 )"</span> <span class="st">"( 8 10 12 11 )"</span></span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a><span class="fu">funBruteGrp</span>(<span class="at">myLow =</span> <span class="dv">48</span>, <span class="at">myUp =</span> <span class="dv">50</span>)</span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>   Grp1          Grp2           Grp3            </span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a><span class="dv">48</span> <span class="st">"( 1 2 3 4 )"</span> <span class="st">"( 5 6 7 9 )"</span>  <span class="st">"( 12 11 10 8 )"</span></span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a><span class="dv">49</span> <span class="st">"( 1 2 3 4 )"</span> <span class="st">"( 5 6 7 10 )"</span> <span class="st">"( 8 9 11 12 )"</span>  <span class="do">## &lt;&lt;-- 3rd distinct partition of groups</span></span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a><span class="dv">50</span> <span class="st">"( 1 2 3 4 )"</span> <span class="st">"( 5 6 7 10 )"</span> <span class="st">"( 8 9 12 11 )"</span> </span></code></pre></div>
<p>We are starting to see a pattern. Each new partition is exactly 24 spots away. This makes sense as there are <code>factorial(4) = 24</code> permutations of size 4. Now, this is an oversimplification as if we simply generate every <em>24<sup>th</sup></em> permutation, we will still get duplication as they start to carry over to the other groups. Observe:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">do.call</span>(rbind, <span class="fu">lapply</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">145</span>, <span class="dv">24</span>), <span class="cf">function</span>(x) {</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">funBruteGrp</span>(<span class="at">myLow =</span> x, <span class="at">myUp =</span> x)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>}))</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>Grp1          Grp2           Grp3            </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>   <span class="st">"( 1 2 3 4 )"</span> <span class="st">"( 5 6 7 8 )"</span>  <span class="st">"( 9 10 11 12 )"</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="dv">25</span>  <span class="st">"( 1 2 3 4 )"</span> <span class="st">"( 5 6 7 9 )"</span>  <span class="st">"( 8 10 11 12 )"</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="dv">49</span>  <span class="st">"( 1 2 3 4 )"</span> <span class="st">"( 5 6 7 10 )"</span> <span class="st">"( 8 9 11 12 )"</span> </span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="dv">73</span>  <span class="st">"( 1 2 3 4 )"</span> <span class="st">"( 5 6 7 11 )"</span> <span class="st">"( 8 9 10 12 )"</span> </span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="dv">97</span>  <span class="st">"( 1 2 3 4 )"</span> <span class="st">"( 5 6 7 12 )"</span> <span class="st">"( 8 9 10 11 )"</span> </span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="dv">121</span> <span class="st">"( 1 2 3 4 )"</span> <span class="st">"( 5 6 8 7 )"</span>  <span class="st">"( 9 10 11 12 )"</span>  <span class="do">## &lt;&lt;-- This is the same as the 1st</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="dv">145</span> <span class="st">"( 1 2 3 4 )"</span> <span class="st">"( 5 6 8 9 )"</span>  <span class="st">"( 7 10 11 12 )"</span>  <span class="do">## partition. The only difference is</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="dv">169</span> <span class="st">"( 1 2 3 4 )"</span> <span class="st">"( 5 6 8 10 )"</span> <span class="st">"( 7 9 11 12 )"</span>   <span class="do">## that the 2nd Grp has been permuted</span></span></code></pre></div>
<p>This only gets more muddled as the number of groups increases. It is also very inefficient, however this exercise hopefully serves to better illustrate these structures.</p>
<p>The algorithm in <code>comboGroups</code> avoids all of this duplication by implementing a novel algorithm akin to <a href="https://en.cppreference.com/w/cpp/algorithm/next_permutation" class="external-link">std::next_permutation</a> from the algorithm library in <code>C++</code>.</p>
<pre><code>system.time(comboGroups(12, numGroups = 3))
   user  system elapsed 
      0       0       0
      
ht(comboGroups(12, numGroups = 3))
head --&gt;
     Grp1 Grp1 Grp1 Grp1 Grp2 Grp2 Grp2 Grp2 Grp3 Grp3 Grp3 Grp3
[1,]    1    2    3    4    5    6    7    8    9   10   11   12
[2,]    1    2    3    4    5    6    7    9    8   10   11   12
[3,]    1    2    3    4    5    6    7   10    8    9   11   12
[4,]    1    2    3    4    5    6    7   11    8    9   10   12
[5,]    1    2    3    4    5    6    7   12    8    9   10   11
--------
tail --&gt;
        Grp1 Grp1 Grp1 Grp1 Grp2 Grp2 Grp2 Grp2 Grp3 Grp3 Grp3 Grp3
[5771,]    1   10   11   12    2    5    8    9    3    4    6    7
[5772,]    1   10   11   12    2    6    7    8    3    4    5    9
[5773,]    1   10   11   12    2    6    7    9    3    4    5    8
[5774,]    1   10   11   12    2    6    8    9    3    4    5    7
[5775,]    1   10   11   12    2    7    8    9    3    4    5    6</code></pre>
<p>Just as in <code>combo/permuteGeneral</code>, we can utilize the arguments <code>lower</code>, <code>upper</code>, <code>Parallel</code>, and <code>nThreads</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">comboGroupsCount</span>(<span class="dv">30</span>, <span class="dv">6</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>Big <span class="fu">Integer</span> (<span class="st">'bigz'</span>) <span class="sc">:</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">123378675083039376</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(a1 <span class="ot">&lt;-</span> <span class="fu">comboGroups</span>(<span class="dv">30</span>, <span class="at">numGroups =</span> <span class="dv">6</span>, </span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>                              <span class="at">lower =</span> <span class="st">"123378675000000000"</span>,</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>                              <span class="at">upper =</span> <span class="st">"123378675005000000"</span>))</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>   user  system elapsed </span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="fl">0.299</span>   <span class="fl">0.113</span>   <span class="fl">0.412</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="do">## Use specific number of threads</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(a2 <span class="ot">&lt;-</span> <span class="fu">comboGroups</span>(<span class="dv">30</span>, <span class="at">numGroups =</span> <span class="dv">6</span>, </span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>                              <span class="at">lower =</span> <span class="st">"123378675000000000"</span>,</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>                              <span class="at">upper =</span> <span class="st">"123378675005000000"</span>, <span class="at">nThreads =</span> <span class="dv">4</span>))</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>   user  system elapsed </span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>  <span class="fl">0.358</span>   <span class="fl">0.197</span>   <span class="fl">0.146</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a><span class="do">## Use n - 1 number of threads (in this case, there are 7)</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(a3 <span class="ot">&lt;-</span> <span class="fu">comboGroups</span>(<span class="dv">30</span>, <span class="at">numGroups =</span> <span class="dv">6</span>, </span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>                              <span class="at">lower =</span> <span class="st">"123378675000000000"</span>,</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>                              <span class="at">upper =</span> <span class="st">"123378675005000000"</span>, <span class="at">Parallel =</span> <span class="cn">TRUE</span>))</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>   user  system elapsed </span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>  <span class="fl">0.466</span>   <span class="fl">0.307</span>   <span class="fl">0.118</span></span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(a1, a2)</span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(a1, a3)</span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span></code></pre></div>
<p>There is one additional argument (i.e. <code>retType</code>) not present in the other two general functions that allows the user to specify the type of object returned. The user can select between <code>"matrix"</code> (the default) and <code>"3Darray"</code>. This structure has a natural connection to 3D space. We have a particular result (<em>1<sup>st</sup></em> dimension) broken down into groups (<em>2<sup>nd</sup></em> dimension) of a certain size (<em>3<sup>rd</sup></em> dimension).</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>my3D <span class="ot">&lt;-</span> <span class="fu">comboGroups</span>(<span class="fu">factor</span>(month.abb), <span class="dv">4</span>, <span class="at">retType =</span> <span class="st">"3Darray"</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>my3D[<span class="dv">1</span>, , ]</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>     Grp1 Grp2 Grp3 Grp4</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] Jan  Apr  Jul  Oct </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,] Feb  May  Aug  Nov </span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,] Mar  Jun  Sep  Dec </span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>Levels<span class="sc">:</span> Apr Aug Dec Feb Jan Jul Jun Mar May Nov Oct Sep</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="fu">comboGroupsCount</span>(<span class="dv">12</span>, <span class="dv">4</span>)</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">15400</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>my3D[<span class="dv">15400</span>, , ]</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>     Grp1 Grp2 Grp3 Grp4</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] Jan  Feb  Mar  Apr </span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,] Nov  Sep  Jul  May </span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,] Dec  Oct  Aug  Jun </span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>Levels<span class="sc">:</span> Apr Aug Dec Feb Jan Jul Jun Mar May Nov Oct Sep</span></code></pre></div>
<div class="section level3">
<h3 id="relevant-posts-on-stackoverflow-as-well-as-oeis-">Relevant Posts on Stackoverflow as well as OEIS.<a class="anchor" aria-label="anchor" href="#relevant-posts-on-stackoverflow-as-well-as-oeis-"></a>
</h3>
<ul>
<li><a href="https://stackoverflow.com/a/51754958/4408538" class="external-link">Iterating through combinations of groups of 4 within a group of 16</a></li>
<li><a href="https://stackoverflow.com/q/57732672/4408538" class="external-link">Create Combinations in R by Groups</a></li>
<li><a href="https://stackoverflow.com/q/39126712/4408538" class="external-link">Algorithm that can create all combinations and all groups of those combinations</a></li>
<li>
<a href="https://oeis.org/A025035" class="external-link uri">https://oeis.org/A025035</a> (See also sequences A025036-A025042)</li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Joseph Wood.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
