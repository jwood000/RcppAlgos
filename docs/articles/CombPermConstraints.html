<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Constraints, Partitions, and Compositions • RcppAlgos</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Constraints, Partitions, and Compositions">
<meta property="og:description" content="RcppAlgos">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RcppAlgos</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.8.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/CombPermConstraints.html">Constraints, Partitions, and Compositions</a>
    </li>
    <li>
      <a href="../articles/CombinatorialSampling.html">Combinatorial Sampling and Ranking</a>
    </li>
    <li>
      <a href="../articles/CombinatoricsIterators.html">Combinatorial Iterators in RcppAlgos</a>
    </li>
    <li>
      <a href="../articles/ComputationalMathematics.html">Computational Mathematics Overview</a>
    </li>
    <li>
      <a href="../articles/GeneralCombinatorics.html">Combination and Permutation Basics</a>
    </li>
    <li>
      <a href="../articles/HighPerformanceBenchmarks.html">High Performance Benchmarks</a>
    </li>
    <li>
      <a href="../articles/OtherCombinatorics.html">Cartesian Products and Partitions of Groups</a>
    </li>
    <li>
      <a href="../articles/SubsetSum.html">Attacking Problems Related to the Subset Sum Problem</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jwood000/RcppAlgos/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Constraints, Partitions, and Compositions</h1>
                        <h4 data-toc-skip class="author">Joseph
Wood</h4>
            
            <h4 data-toc-skip class="date">10/02/2023</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/jwood000/RcppAlgos/blob/HEAD/vignettes/CombPermConstraints.Rmd" class="external-link"><code>vignettes/CombPermConstraints.Rmd</code></a></small>
      <div class="hidden name"><code>CombPermConstraints.Rmd</code></div>

    </div>

    
    
<p>This document covers the topic of finding combinations or
permutations that meet a specific set of criteria. For example,
retrieving all combinations of a vector that have a product between two
bounds.</p>
<hr>
<div class="section level2">
<h2 id="constraint-functions">Constraint Functions<a class="anchor" aria-label="anchor" href="#constraint-functions"></a>
</h2>
<p>There are 5 compiled constraint functions that can be utilized
efficiently to test a given result.</p>
<ol style="list-style-type: decimal">
<li>sum</li>
<li>prod</li>
<li>mean</li>
<li>max</li>
<li>min</li>
</ol>
<p>They are passed as strings to the <code>constraintFun</code>
parameter. When these are employed without any other parameters being
set, an additional column is added that represents the result of
applying the given function to that combination/permutation. You can
also set <code>keepResults = TRUE</code> (more on this later).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jwood000/RcppAlgos" class="external-link">RcppAlgos</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">90</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html" class="external-link">packageVersion</a></span><span class="op">(</span><span class="st">"RcppAlgos"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] '2.8.2'</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/capture.output.html" class="external-link">capture.output</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>, collapse <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; R version 4.3.1 (2023-06-16)</span></span>
<span><span class="co">#&gt; Platform: aarch64-apple-darwin20 (64-bit)</span></span>
<span><span class="co">#&gt; Running under: macOS Ventura 13.4.1</span></span>
<span></span>
<span><span class="co">## base R using combn and FUN</span></span>
<span><span class="va">combnSum</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/utils/combn.html" class="external-link">combn</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">10</span>, <span class="va">sum</span><span class="op">)</span></span>
<span><span class="va">algosSum</span> <span class="op">=</span> <span class="fu"><a href="../reference/combinatoricsGeneral.html">comboGeneral</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">10</span>, constraintFun <span class="op">=</span> <span class="st">"sum"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Notice the additional column (i.e. the 11th column)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">algosSum</span><span class="op">)</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11]</span></span>
<span><span class="co">#&gt; [1,]    1    2    3    4    5    6    7    8    9    10    55</span></span>
<span><span class="co">#&gt; [2,]    1    2    3    4    5    6    7    8    9    11    56</span></span>
<span><span class="co">#&gt; [3,]    1    2    3    4    5    6    7    8    9    12    57</span></span>
<span><span class="co">#&gt; [4,]    1    2    3    4    5    6    7    8    9    13    58</span></span>
<span><span class="co">#&gt; [5,]    1    2    3    4    5    6    7    8    9    14    59</span></span>
<span><span class="co">#&gt; [6,]    1    2    3    4    5    6    7    8    9    15    60</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">combnSum</span><span class="op">)</span>, <span class="va">algosSum</span><span class="op">[</span>,<span class="fl">11</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="co">## Using parallel</span></span>
<span><span class="va">paralSum</span> <span class="op">=</span> <span class="fu"><a href="../reference/combinatoricsGeneral.html">comboGeneral</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">10</span>, constraintFun <span class="op">=</span> <span class="st">"sum"</span>, Parallel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">paralSum</span>, <span class="va">algosSum</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/joshuaulrich/microbenchmark/" class="external-link">microbenchmark</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html" class="external-link">microbenchmark</a></span><span class="op">(</span>serial <span class="op">=</span> <span class="fu"><a href="../reference/combinatoricsGeneral.html">comboGeneral</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">10</span>, constraintFun <span class="op">=</span> <span class="st">"sum"</span><span class="op">)</span>,</span>
<span>             parallel <span class="op">=</span> <span class="fu"><a href="../reference/combinatoricsGeneral.html">comboGeneral</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">10</span>, constraintFun <span class="op">=</span> <span class="st">"sum"</span>, Parallel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>             combnSum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/utils/combn.html" class="external-link">combn</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">10</span>, <span class="va">sum</span><span class="op">)</span>, unit <span class="op">=</span> <span class="st">"relative"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in microbenchmark(serial = comboGeneral(20, 10, constraintFun = "sum"), : less</span></span>
<span><span class="co">#&gt; accurate nanosecond times to avoid potential integer overflows</span></span>
<span><span class="co">#&gt; Unit: relative</span></span>
<span><span class="co">#&gt;      expr        min         lq       mean     median         uq      max neval cld</span></span>
<span><span class="co">#&gt;    serial   3.329755   3.149671   3.232522   2.928422   2.902063 11.39604   100 a  </span></span>
<span><span class="co">#&gt;  parallel   1.000000   1.000000   1.000000   1.000000   1.000000  1.00000   100  b </span></span>
<span><span class="co">#&gt;  combnSum 164.247037 151.343174 133.832249 139.148691 132.041238 56.83403   100   c</span></span></code></pre></div>
<div class="section level3">
<h3 id="faster-than-rowsums-and-rowmeans">Faster than <code>rowSums</code> and <code>rowMeans</code><a class="anchor" aria-label="anchor" href="#faster-than-rowsums-and-rowmeans"></a>
</h3>
<p>Finding row sums or row means is even faster than simply applying the
highly efficient <code>rowSums</code>/<code>rowMeans</code>
<em>after</em> the combinations have already been generated:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Pre-generate combinations</span></span>
<span><span class="va">combs</span> <span class="op">=</span> <span class="fu"><a href="../reference/combinatoricsGeneral.html">comboGeneral</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Testing rowSums alone against generating combinations as well as summing</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html" class="external-link">microbenchmark</a></span><span class="op">(</span>serial <span class="op">=</span> <span class="fu"><a href="../reference/combinatoricsGeneral.html">comboGeneral</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">10</span>, constraintFun <span class="op">=</span> <span class="st">"sum"</span><span class="op">)</span>,</span>
<span>             parallel <span class="op">=</span> <span class="fu"><a href="../reference/combinatoricsGeneral.html">comboGeneral</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">10</span>, constraintFun <span class="op">=</span> <span class="st">"sum"</span>, Parallel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>              rowsums <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">combs</span><span class="op">)</span>, unit <span class="op">=</span> <span class="st">"relative"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Unit: relative</span></span>
<span><span class="co">#&gt;      expr      min       lq     mean   median       uq       max neval cld</span></span>
<span><span class="co">#&gt;    serial 3.571438 3.296153 2.985064 3.020970 2.899328 1.4400973   100 a  </span></span>
<span><span class="co">#&gt;  parallel 1.000000 1.000000 1.000000 1.000000 1.000000 1.0000000   100  b </span></span>
<span><span class="co">#&gt;   rowsums 2.143068 1.974135 1.764643 1.740508 1.697244 0.4544122   100   c</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">combs</span><span class="op">)</span>,</span>
<span>          <span class="fu"><a href="../reference/combinatoricsGeneral.html">comboGeneral</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">10</span>,</span>
<span>                       constraintFun <span class="op">=</span> <span class="st">"sum"</span>,</span>
<span>                       Parallel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">[</span>,<span class="fl">11</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="co">## Testing rowMeans alone against generating combinations as well as obtain row means</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html" class="external-link">microbenchmark</a></span><span class="op">(</span>serial <span class="op">=</span> <span class="fu"><a href="../reference/combinatoricsGeneral.html">comboGeneral</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">10</span>, constraintFun <span class="op">=</span> <span class="st">"mean"</span><span class="op">)</span>,</span>
<span>             parallel <span class="op">=</span> <span class="fu"><a href="../reference/combinatoricsGeneral.html">comboGeneral</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">10</span>, constraintFun <span class="op">=</span> <span class="st">"mean"</span>, Parallel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>             rowmeans <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowMeans</a></span><span class="op">(</span><span class="va">combs</span><span class="op">)</span>, unit <span class="op">=</span> <span class="st">"relative"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Unit: relative</span></span>
<span><span class="co">#&gt;      expr      min       lq     mean   median       uq      max neval cld</span></span>
<span><span class="co">#&gt;    serial 2.523866 2.454797 2.452449 2.444079 2.417608 1.372691   100 a  </span></span>
<span><span class="co">#&gt;  parallel 1.000000 1.000000 1.000000 1.000000 1.000000 1.000000   100  b </span></span>
<span><span class="co">#&gt;  rowmeans 1.425994 1.360147 1.370569 1.348623 1.328322 1.142349   100   c</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowMeans</a></span><span class="op">(</span><span class="va">combs</span><span class="op">)</span>,</span>
<span>          <span class="fu"><a href="../reference/combinatoricsGeneral.html">comboGeneral</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">10</span>,</span>
<span>                       constraintFun <span class="op">=</span> <span class="st">"mean"</span>,</span>
<span>                       Parallel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">[</span>,<span class="fl">11</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>In both cases above, <code>RcppAlgos</code> is doing double the work
nearly twice as fast!!!</p>
</div>
</div>
<div class="section level2">
<h2 id="comparison-operators-and-limitconstraints">Comparison Operators and <code>limitConstraints</code><a class="anchor" aria-label="anchor" href="#comparison-operators-and-limitconstraints"></a>
</h2>
<p>The standard 5 comparison operators (i.e. <code>"&lt;"</code>,
<code>"&gt;"</code>, <code>"&lt;="</code>, <code>"&gt;="</code>, &amp;
<code>"=="</code>) can be used in a variety of ways. In order for them
to have any effect, they must be used in conjunction with
<code>constraintFun</code> as well as <code>limitConstraints</code>. The
latter is the value(s) that will be used for comparison. It can be
passed as a single value or a vector of two numerical values. This is
useful when one wants to find results that are between (or outside) of a
given range.</p>
<div class="section level3">
<h3 id="one-comparison-operator">One Comparison Operator<a class="anchor" aria-label="anchor" href="#one-comparison-operator"></a>
</h3>
<p>First we will look at cases with only one comparison and one value
for the <code>limitConstraint</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Generate some random data. N.B. Using R &gt;= 4.0.0</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">101</span><span class="op">)</span></span>
<span><span class="va">myNums</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">20</span><span class="op">)</span></span>
<span></span>
<span><span class="va">myNums</span></span>
<span><span class="co">#&gt;  [1] 329 313 430  95 209 442 351 317 444 315 246 355 128 131 288   9 352 489 354 244</span></span>
<span></span>
<span><span class="co">## Find all 5-tuples combinations without repetition of myNums</span></span>
<span><span class="co">## (defined above) such that the sum is equal to 1176.</span></span>
<span><span class="va">p1</span> <span class="op">=</span> <span class="fu"><a href="../reference/combinatoricsGeneral.html">comboGeneral</a></span><span class="op">(</span>v <span class="op">=</span> <span class="va">myNums</span>, m <span class="op">=</span> <span class="fl">5</span>,</span>
<span>                  constraintFun <span class="op">=</span> <span class="st">"sum"</span>,</span>
<span>                  comparisonFun <span class="op">=</span> <span class="st">"=="</span>,</span>
<span>                  limitConstraints <span class="op">=</span> <span class="fl">1176</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">p1</span><span class="op">)</span></span>
<span><span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [10,]   95  128  246  352  355</span></span>
<span><span class="co">#&gt; [11,]   95  128  288  313  352</span></span>
<span><span class="co">#&gt; [12,]   95  131  244  351  355</span></span>
<span><span class="co">#&gt; [13,]   95  131  244  352  354</span></span>
<span><span class="co">#&gt; [14,]   95  209  244  313  315</span></span>
<span><span class="co">#&gt; [15,]  128  131  246  317  354</span></span>
<span></span>
<span></span>
<span><span class="co">## Authenticate with brute force</span></span>
<span><span class="va">allCombs</span> <span class="op">=</span> <span class="fu"><a href="../reference/combinatoricsGeneral.html">comboGeneral</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="va">myNums</span><span class="op">)</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">p1</span>, <span class="va">allCombs</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">allCombs</span><span class="op">)</span> <span class="op">==</span> <span class="fl">1176</span><span class="op">)</span>, <span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span></span>
<span><span class="co">## How about finding combinations with repetition</span></span>
<span><span class="co">## whose mean is less than or equal to 150.</span></span>
<span><span class="va">p2</span> <span class="op">=</span> <span class="fu"><a href="../reference/combinatoricsGeneral.html">comboGeneral</a></span><span class="op">(</span>v <span class="op">=</span> <span class="va">myNums</span>, m <span class="op">=</span> <span class="fl">5</span>, <span class="cn">TRUE</span>,</span>
<span>                  constraintFun <span class="op">=</span> <span class="st">"mean"</span>,</span>
<span>                  comparisonFun <span class="op">=</span> <span class="st">"&lt;="</span>,</span>
<span>                  limitConstraints <span class="op">=</span> <span class="fl">150</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Again, we authenticate with brute force</span></span>
<span><span class="va">allCombs</span> <span class="op">=</span> <span class="fu"><a href="../reference/combinatoricsGeneral.html">comboGeneral</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="va">myNums</span><span class="op">)</span>, <span class="fl">5</span>, <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">p2</span>, <span class="va">allCombs</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowMeans</a></span><span class="op">(</span><span class="va">allCombs</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="fl">150</span><span class="op">)</span>, <span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE  ### &lt;-- What? They should be the same</span></span>
<span></span>
<span><span class="co">## N.B.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">p2</span><span class="op">[</span><span class="fl">1</span>, <span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "numeric"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">allCombs</span><span class="op">[</span><span class="fl">1</span>, <span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "integer"</span></span>
<span></span>
<span><span class="co">## When mean is employed or it can be determined that integral</span></span>
<span><span class="co">## values will not suffice for the comparison, we fall back to</span></span>
<span><span class="co">## numeric types, thus all.equal should return TRUE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">p2</span>, <span class="va">allCombs</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowMeans</a></span><span class="op">(</span><span class="va">allCombs</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="fl">150</span><span class="op">)</span>, <span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="two-comparison-operators">Two Comparison Operators<a class="anchor" aria-label="anchor" href="#two-comparison-operators"></a>
</h3>
<p>Sometimes, we need to generate combinations/permutations such that
when we apply a constraint function, the results are between (or
outside) a given range. There is a natural two step process when finding
results outside a range, however for finding results between a range,
this two step approach could become computationally demanding. The
underlying algorithms in <code>RcppAlgos</code> are optimized for both
cases and avoids adding results that will eventually be removed.</p>
<p>Using two comparisons is easy. The first comparison operator is
applied to the first limit and the second operator is applied to the
second limit.</p>
<p>Note that in the examples below, we have
<code>keepResults = TRUE</code>. This means an additional column will be
added to the output that is the result of applying
<code>constraintFun</code> to that particular combination.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Get combinations such that the product is</span></span>
<span><span class="co">## strictly between 3600 and 4000</span></span>
<span><span class="fu"><a href="../reference/combinatoricsGeneral.html">comboGeneral</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">7</span>, <span class="cn">TRUE</span>, constraintFun <span class="op">=</span> <span class="st">"prod"</span>,</span>
<span>             comparisonFun <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"&gt;"</span>,<span class="st">"&lt;"</span><span class="op">)</span>,          <span class="co">## Find results &gt; 3600 and &lt; 4000</span></span>
<span>             limitConstraints <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3600</span>, <span class="fl">4000</span><span class="op">)</span>,</span>
<span>             keepResults <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]</span></span>
<span><span class="co">#&gt; [1,]    1    2    3    5    5    5    5 3750</span></span>
<span><span class="co">#&gt; [2,]    1    3    4    4    4    4    5 3840</span></span>
<span><span class="co">#&gt; [3,]    2    2    3    4    4    4    5 3840</span></span>
<span><span class="co">#&gt; [4,]    3    3    3    3    3    3    5 3645</span></span>
<span><span class="co">#&gt; [5,]    3    3    3    3    3    4    4 3888</span></span>
<span></span>
<span><span class="co"># ## The above is the same as doing the following:</span></span>
<span><span class="co"># comboGeneral(5, 7, TRUE, constraintFun = "prod",</span></span>
<span><span class="co">#              comparisonFun = c("&lt;","&gt;"),          ## Note that the comparison vector</span></span>
<span><span class="co">#              limitConstraints = c(4000, 3600),    ## and the limits have flipped</span></span>
<span><span class="co">#              keepResults = TRUE)</span></span>
<span></span>
<span></span>
<span><span class="co">## What about finding combinations outside a range</span></span>
<span><span class="va">outside</span> <span class="op">=</span> <span class="fu"><a href="../reference/combinatoricsGeneral.html">comboGeneral</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">7</span>, <span class="cn">TRUE</span>, constraintFun <span class="op">=</span> <span class="st">"prod"</span>,</span>
<span>                       comparisonFun <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"&lt;="</span>,<span class="st">"&gt;="</span><span class="op">)</span>,</span>
<span>                       limitConstraints <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3600</span>, <span class="fl">4000</span><span class="op">)</span>,</span>
<span>                       keepResults <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">outside</span><span class="op">[</span>, <span class="op">-</span><span class="fl">8</span><span class="op">]</span>, <span class="fl">1</span>, <span class="va">prod</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="fl">3600</span></span>
<span>     <span class="op">|</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">outside</span><span class="op">[</span>, <span class="op">-</span><span class="fl">8</span><span class="op">]</span>, <span class="fl">1</span>, <span class="va">prod</span><span class="op">)</span> <span class="op">&gt;=</span> <span class="fl">4000</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">outside</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 325   8</span></span>
<span></span>
<span><span class="co">## Note that we obtained 5 results when searching "between"</span></span>
<span><span class="co">## 3600 and 4000. Thus we have: 325 + 5 = 330</span></span>
<span><span class="fu"><a href="../reference/combinatoricsCount.html">comboCount</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">7</span>, <span class="cn">T</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 330</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="using-tolerance">Using <code>tolerance</code><a class="anchor" aria-label="anchor" href="#using-tolerance"></a>
</h3>
<p>When the underlying type is <code>numeric</code>, <a href="https://en.wikipedia.org/wiki/Round-off_error" class="external-link">round-off
errors</a> can occur. As stated in <a href="https://en.wikipedia.org/wiki/Floating-point_error_mitigation" class="external-link">floating-point
error mitigation</a>:</p>
<blockquote>
<p><strong><em>“By definition, floating-point error cannot be
eliminated, and, at best, can only be managed.”</em></strong></p>
</blockquote>
<p>Here is a great stackoverflow post that further illuminates this
tricky topic:</p>
<ul>
<li><a href="https://stackoverflow.com/q/59229545/4408538" class="external-link">What is the
correct/standard way to check if difference is smaller than machine
precision?</a></li>
</ul>
<p>For these reasons, the argument <code>tolerance</code> can be
utilized to refine a given constraint. It is added to the upper limit
and subtracted from the lower limit. The default value is
<code>sqrt(.Machine$double.eps) ~= 0.00000001490116</code>.</p>
<p>This default value is good and bad.</p>
<p>For the good side:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="fu"><a href="../reference/combinatoricsGeneral.html">comboGeneral</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span>, <span class="fl">0.05</span><span class="op">)</span>, <span class="fl">6</span>, <span class="cn">TRUE</span>,</span>
<span>                 constraintFun <span class="op">=</span> <span class="st">"sum"</span>,</span>
<span>                 comparisonFun <span class="op">=</span> <span class="st">"=="</span>,</span>
<span>                 limitConstraints <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 199   6</span></span>
<span></span>
<span><span class="co">## Confirm with integers and brute force</span></span>
<span><span class="va">allCbs</span> <span class="op">=</span> <span class="fu"><a href="../reference/combinatoricsGeneral.html">comboGeneral</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0L</span>, <span class="fl">50L</span>, <span class="fl">5L</span><span class="op">)</span>, <span class="fl">6</span>, <span class="cn">TRUE</span>, constraintFun <span class="op">=</span> <span class="st">"sum"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">allCbs</span><span class="op">[</span>, <span class="fl">7</span><span class="op">]</span> <span class="op">==</span> <span class="fl">100L</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 199</span></span></code></pre></div>
<p>If we had a tolerance of zero, we would have obtained an incorrect
result:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## We miss 31 combinations that add up to 1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="fu"><a href="../reference/combinatoricsGeneral.html">comboGeneral</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span>, <span class="fl">0.05</span><span class="op">)</span>, <span class="fl">6</span>, <span class="cn">TRUE</span>,</span>
<span>                 constraintFun <span class="op">=</span> <span class="st">"sum"</span>,</span>
<span>                 comparisonFun <span class="op">=</span> <span class="st">"=="</span>,</span>
<span>                 limitConstraints <span class="op">=</span> <span class="fl">1</span>, tolerance <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 168   6</span></span></code></pre></div>
<p>And now for a less desirable result. The example below appears to
give incorrect results. That is, we shouldn’t return any combination
with a mean of 4.1 or 5.1.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/combinatoricsGeneral.html">comboGeneral</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2.1</span>, <span class="fl">3.1</span>, <span class="fl">5.1</span>, <span class="fl">7.1</span><span class="op">)</span>, <span class="fl">3</span>, <span class="cn">T</span>,</span>
<span>             constraintFun <span class="op">=</span> <span class="st">"mean"</span>, comparisonFun <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"&lt;"</span>, <span class="st">"&gt;"</span><span class="op">)</span>,</span>
<span>             limitConstraints <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5.1</span>, <span class="fl">4.1</span><span class="op">)</span>, keepResults <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3]     [,4]</span></span>
<span><span class="co">#&gt; [1,]  2.1  3.1  7.1 4.100000</span></span>
<span><span class="co">#&gt; [2,]  2.1  5.1  5.1 4.100000</span></span>
<span><span class="co">#&gt; [3,]  2.1  5.1  7.1 4.766667</span></span>
<span><span class="co">#&gt; [4,]  3.1  3.1  7.1 4.433333</span></span>
<span><span class="co">#&gt; [5,]  3.1  5.1  5.1 4.433333</span></span>
<span><span class="co">#&gt; [6,]  3.1  5.1  7.1 5.100000</span></span>
<span><span class="co">#&gt; [7,]  5.1  5.1  5.1 5.100000</span></span></code></pre></div>
<p>In the above example, the range that is actually tested against is
<code>c(4.0999999950329462, 5.1000000049670531)</code>.</p>
<p>If you want to be absolutely sure you are getting the correct
results, one must rely on integers as simple changes in arithmetic can
throw off precision in floating point operations.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/combinatoricsGeneral.html">comboGeneral</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">21</span>, <span class="fl">31</span>, <span class="fl">51</span>, <span class="fl">71</span><span class="op">)</span>, <span class="fl">3</span>, <span class="cn">T</span>,</span>
<span>             constraintFun <span class="op">=</span> <span class="st">"mean"</span>, comparisonFun <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"&lt;"</span>, <span class="st">"&gt;"</span><span class="op">)</span>,</span>
<span>             limitConstraints <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">51</span>, <span class="fl">41</span><span class="op">)</span>, keepResults <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">/</span> <span class="fl">10</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3]     [,4]</span></span>
<span><span class="co">#&gt; [1,]  2.1  5.1  7.1 4.766667</span></span>
<span><span class="co">#&gt; [2,]  3.1  3.1  7.1 4.433333</span></span>
<span><span class="co">#&gt; [3,]  3.1  5.1  5.1 4.433333</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="output-order-with-permutegeneral">Output Order with <code>permuteGeneral</code><a class="anchor" aria-label="anchor" href="#output-order-with-permutegeneral"></a>
</h3>
<p>Typically, when we call <code>permuteGeneral</code>, the output is in
lexicographical order, however when we apply a constraint, the
underlying algorithm checks against combinations only, as this is more
efficient. If a particular combination meets a constraint, then all
permutations of that vector also meet that constraint, so there is no
need to check them. For this reason, the output isn’t in order.
Observe:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/combinatoricsGeneral.html">permuteGeneral</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span>, <span class="fl">3</span>, freqs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>               constraintFun <span class="op">=</span> <span class="st">"mean"</span>, comparisonFun <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"&gt;"</span>, <span class="st">"&lt;"</span><span class="op">)</span>,</span>
<span>               limitConstraints <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">5</span><span class="op">)</span>, keepResults <span class="op">=</span> <span class="cn">TRUE</span>, tolerance <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="co">#&gt;       [,1] [,2] [,3]     [,4]</span></span>
<span><span class="co">#&gt;  [1,]    2    5    7 4.666667   ### &lt;-- First combination that meets the criteria</span></span>
<span><span class="co">#&gt;  [2,]    2    7    5 4.666667</span></span>
<span><span class="co">#&gt;  [3,]    5    2    7 4.666667</span></span>
<span><span class="co">#&gt;  [4,]    5    7    2 4.666667</span></span>
<span><span class="co">#&gt;  [5,]    7    2    5 4.666667</span></span>
<span><span class="co">#&gt;  [6,]    7    5    2 4.666667</span></span>
<span><span class="co">#&gt;  [7,]    3    3    7 4.333333   ### &lt;-- Second combination that meets the criteria</span></span>
<span><span class="co">#&gt;  [8,]    3    7    3 4.333333</span></span>
<span><span class="co">#&gt;  [9,]    7    3    3 4.333333</span></span>
<span><span class="co">#&gt; [10,]    3    5    5 4.333333   ### &lt;-- Third combination that meets the criteria</span></span>
<span><span class="co">#&gt; [11,]    5    3    5 4.333333</span></span>
<span><span class="co">#&gt; [12,]    5    5    3 4.333333</span></span></code></pre></div>
<p>As you can see, the <em>2<sup>nd</sup></em> through the
<em>6<sup>th</sup></em> entries are simply permutations of the
<em>1<sup>st</sup></em> entry. Similarly, entries <em>8</em> and
<em>9</em> are permutations of the <em>7<sup>th</sup></em> and entries
<em>11</em> and <em>12</em> are permutations of the
<em>10<sup>th</sup></em>.</p>
</div>
</div>
<div class="section level2">
<h2 id="integer-partitions">Integer Partitions<a class="anchor" aria-label="anchor" href="#integer-partitions"></a>
</h2>
<p>Specialized algorithms are employed when it can be determined that we
are looking for <a href="https://en.wikipedia.org/wiki/Partition_(number_theory)" class="external-link">integer
partitions</a>.</p>
<p>As of version <code>2.5.0</code>, we now have added
<code>partitionsGeneral</code> which is similar to
<code>comboGeneral</code> with <code>constraintFun = "sum"</code> and
<code>comparisonFun = "=="</code>. Instead of using the very general
<code>limitConstraints</code> parameter, we use <code>target</code> with
a default of <code>max(v)</code> as it seems more fitting for
partitions.</p>
<div class="section level3">
<h3 id="case-1-all-integer-partitions-of-n">Case 1: All Integer Partitions of <em>N</em><a class="anchor" aria-label="anchor" href="#case-1-all-integer-partitions-of-n"></a>
</h3>
<p>We need <code>v = 0:N</code>, <code>repetition = TRUE</code>. When we
leave <code>m = NULL</code>, <code>m</code> is internally set to the
length of the longest non-zero combination (this is true for all cases
below).</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/partitionsGeneral.html">partitionsGeneral</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">5</span>, repetition <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    0    0    0    5</span></span>
<span><span class="co">#&gt; [2,]    0    0    0    1    4</span></span>
<span><span class="co">#&gt; [3,]    0    0    0    2    3</span></span>
<span><span class="co">#&gt; [4,]    0    0    1    1    3</span></span>
<span><span class="co">#&gt; [5,]    0    0    1    2    2</span></span>
<span><span class="co">#&gt; [6,]    0    1    1    1    2</span></span>
<span><span class="co">#&gt; [7,]    1    1    1    1    1</span></span>
<span></span>
<span><span class="co">## Note that we could also use comboGeneral:</span></span>
<span><span class="co">## comboGeneral(0:5, repetition = TRUE,</span></span>
<span><span class="co">##              constraintFun = "sum",</span></span>
<span><span class="co">##              comparisonFun = "==", limitConstraints = 5)</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## The same goes for any of the examples below</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="case-2-integer-partitions-of-n-of-length-m">Case 2: Integer Partitions of <em>N</em> of Length <em>m</em><a class="anchor" aria-label="anchor" href="#case-2-integer-partitions-of-n-of-length-m"></a>
</h3>
<p>Everything is the same as above except for explicitly setting the
desired length and deciding whether to include zero or not.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Including zero</span></span>
<span><span class="fu"><a href="../reference/partitionsGeneral.html">partitionsGeneral</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">3</span>, repetition <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span><span class="co">#&gt; [1,]    0    0    5</span></span>
<span><span class="co">#&gt; [2,]    0    1    4</span></span>
<span><span class="co">#&gt; [3,]    0    2    3</span></span>
<span><span class="co">#&gt; [4,]    1    1    3</span></span>
<span><span class="co">#&gt; [5,]    1    2    2</span></span>
<span></span>
<span><span class="co">## Zero not included</span></span>
<span><span class="fu"><a href="../reference/partitionsGeneral.html">partitionsGeneral</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">3</span>, repetition <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span><span class="co">#&gt; [1,]    1    1    3</span></span>
<span><span class="co">#&gt; [2,]    1    2    2</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="case-3-integer-partitions-of-n-into-distinct-parts">Case 3: Integer Partitions of <em>N</em> into Distinct Parts<a class="anchor" aria-label="anchor" href="#case-3-integer-partitions-of-n-into-distinct-parts"></a>
</h3>
<p>Same as <code>Case 1 &amp; 2</code> except now we have
<code>repetition = FALSE</code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/partitionsGeneral.html">partitionsGeneral</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4]</span></span>
<span><span class="co">#&gt; [1,]    0    1    2    7</span></span>
<span><span class="co">#&gt; [2,]    0    1    3    6</span></span>
<span><span class="co">#&gt; [3,]    0    1    4    5</span></span>
<span><span class="co">#&gt; [4,]    0    2    3    5</span></span>
<span><span class="co">#&gt; [5,]    1    2    3    4</span></span>
<span></span>
<span><span class="co">## Zero not included and restrict the length</span></span>
<span><span class="fu"><a href="../reference/partitionsGeneral.html">partitionsGeneral</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span><span class="co">#&gt; [1,]    1    2    7</span></span>
<span><span class="co">#&gt; [2,]    1    3    6</span></span>
<span><span class="co">#&gt; [3,]    1    4    5</span></span>
<span><span class="co">#&gt; [4,]    2    3    5</span></span>
<span></span>
<span><span class="co">## Include zero and restrict the length</span></span>
<span><span class="fu"><a href="../reference/partitionsGeneral.html">partitionsGeneral</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span><span class="co">#&gt; [1,]    0    1    9</span></span>
<span><span class="co">#&gt; [2,]    0    2    8</span></span>
<span><span class="co">#&gt; [3,]    0    3    7</span></span>
<span><span class="co">#&gt; [4,]    0    4    6</span></span>
<span><span class="co">#&gt; [5,]    1    2    7</span></span>
<span><span class="co">#&gt; [6,]    1    3    6</span></span>
<span><span class="co">#&gt; [7,]    1    4    5</span></span>
<span><span class="co">#&gt; [8,]    2    3    5</span></span>
<span></span>
<span><span class="co">## partitions of 10 into distinct parts of every length</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="../reference/partitionsGeneral.html">partitionsGeneral</a></span><span class="op">(</span><span class="fl">10</span>, <span class="va">x</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt;      [,1]</span></span>
<span><span class="co">#&gt; [1,]   10</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt;      [,1] [,2]</span></span>
<span><span class="co">#&gt; [1,]    1    9</span></span>
<span><span class="co">#&gt; [2,]    2    8</span></span>
<span><span class="co">#&gt; [3,]    3    7</span></span>
<span><span class="co">#&gt; [4,]    4    6</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[3]]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span><span class="co">#&gt; [1,]    1    2    7</span></span>
<span><span class="co">#&gt; [2,]    1    3    6</span></span>
<span><span class="co">#&gt; [3,]    1    4    5</span></span>
<span><span class="co">#&gt; [4,]    2    3    5</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[4]]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4]</span></span>
<span><span class="co">#&gt; [1,]    1    2    3    4</span></span></code></pre></div>
<div class="section level4">
<h4 id="using-freqs-to-refine-length">Using <code>freqs</code> to Refine Length<a class="anchor" aria-label="anchor" href="#using-freqs-to-refine-length"></a>
</h4>
<p>We can utilize the <code>freqs</code> argument to obtain more
distinct partitions by allowing for repeated zeros. The super optimized
algorithm will only be carried out if zero is included and the number of
repetitions for every number except zero is one.</p>
<p>For example, given <code>v = 0:N</code> and <code>J &gt;= 1</code>,
if <code>freqs = c(J, rep(1, N))</code>, then the super optimized
algorithm will be used, however if
<code>freqs = c(J, 2, rep(1, N - 1))</code>, the general algorithm will
be used. It should be noted that the general algorithms are still highly
optimized so one should not fear using it.</p>
<p>A pattern that is guaranteed to retrieve all distinct partitions of
<em>N</em> is to set <code>v = 0:N</code> and
<code>freqs = c(N, rep(1, N))</code> (the extra zeros will be left
off).</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Obtain all distinct partitions of 10</span></span>
<span><span class="fu"><a href="../reference/partitionsGeneral.html">partitionsGeneral</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">10</span>, freqs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>    <span class="co">## Same as c(3, rep(1, 10))</span></span>
<span><span class="co">#&gt;       [,1] [,2] [,3] [,4]</span></span>
<span><span class="co">#&gt;  [1,]    0    0    0   10</span></span>
<span><span class="co">#&gt;  [2,]    0    0    1    9</span></span>
<span><span class="co">#&gt;  [3,]    0    0    2    8</span></span>
<span><span class="co">#&gt;  [4,]    0    0    3    7</span></span>
<span><span class="co">#&gt;  [5,]    0    0    4    6</span></span>
<span><span class="co">#&gt;  [6,]    0    1    2    7</span></span>
<span><span class="co">#&gt;  [7,]    0    1    3    6</span></span>
<span><span class="co">#&gt;  [8,]    0    1    4    5</span></span>
<span><span class="co">#&gt;  [9,]    0    2    3    5</span></span>
<span><span class="co">#&gt; [10,]    1    2    3    4</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="caveats-using-freqs">Caveats Using <code>freqs</code><a class="anchor" aria-label="anchor" href="#caveats-using-freqs"></a>
</h4>
<p>As noted in <code>Case 1</code>, if <code>m = NULL</code>, the length
of the output will be determined by the longest non-zero combination
that sums to <em>N</em>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## m is NOT NULL and output has at most 2 zeros</span></span>
<span><span class="fu"><a href="../reference/partitionsGeneral.html">partitionsGeneral</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">3</span>, freqs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;       [,1] [,2] [,3]</span></span>
<span><span class="co">#&gt;  [1,]    0    0   10</span></span>
<span><span class="co">#&gt;  [2,]    0    1    9</span></span>
<span><span class="co">#&gt;  [3,]    0    2    8</span></span>
<span><span class="co">#&gt;  [4,]    0    3    7</span></span>
<span><span class="co">#&gt;  [5,]    0    4    6</span></span>
<span><span class="co">#&gt;  [6,]    1    2    7</span></span>
<span><span class="co">#&gt;  [7,]    1    3    6</span></span>
<span><span class="co">#&gt;  [8,]    1    4    5</span></span>
<span><span class="co">#&gt;  [9,]    2    3    5</span></span>
<span></span>
<span><span class="co">## m is NULL and output has at most 2 zeros</span></span>
<span><span class="fu"><a href="../reference/partitionsGeneral.html">partitionsGeneral</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">10</span>, freqs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;       [,1] [,2] [,3] [,4]</span></span>
<span><span class="co">#&gt;  [1,]    0    0    1    9</span></span>
<span><span class="co">#&gt;  [2,]    0    0    2    8</span></span>
<span><span class="co">#&gt;  [3,]    0    0    3    7</span></span>
<span><span class="co">#&gt;  [4,]    0    0    4    6</span></span>
<span><span class="co">#&gt;  [5,]    0    1    2    7</span></span>
<span><span class="co">#&gt;  [6,]    0    1    3    6</span></span>
<span><span class="co">#&gt;  [7,]    0    1    4    5</span></span>
<span><span class="co">#&gt;  [8,]    0    2    3    5</span></span>
<span><span class="co">#&gt;  [9,]    1    2    3    4</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="case-4-integer-partitions-of-n-into-parts-of-varying-multiplicity">Case 4: Integer Partitions of <em>N</em> into Parts of Varying
Multiplicity<a class="anchor" aria-label="anchor" href="#case-4-integer-partitions-of-n-into-parts-of-varying-multiplicity"></a>
</h3>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## partitions of 12 into 4 parts where each part can</span></span>
<span><span class="co">## be used a specific number of times (e.g. 2 or 3)</span></span>
<span><span class="fu"><a href="../reference/partitionsGeneral.html">partitionsGeneral</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">4</span>, freqs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;       [,1] [,2] [,3] [,4]</span></span>
<span><span class="co">#&gt;  [1,]    1    1    2    8</span></span>
<span><span class="co">#&gt;  [2,]    1    1    3    7</span></span>
<span><span class="co">#&gt;  [3,]    1    1    4    6</span></span>
<span><span class="co">#&gt;  [4,]    1    1    5    5</span></span>
<span><span class="co">#&gt;  [5,]    1    2    2    7</span></span>
<span><span class="co">#&gt;  [6,]    1    2    3    6</span></span>
<span><span class="co">#&gt;  [7,]    1    2    4    5</span></span>
<span><span class="co">#&gt;  [8,]    1    3    3    5</span></span>
<span><span class="co">#&gt;  [9,]    1    3    4    4</span></span>
<span><span class="co">#&gt; [10,]    2    2    2    6</span></span>
<span><span class="co">#&gt; [11,]    2    2    3    5</span></span>
<span><span class="co">#&gt; [12,]    2    2    4    4</span></span>
<span><span class="co">#&gt; [13,]    2    3    3    4</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="efficiency-generating-partitions">Efficiency Generating Partitions<a class="anchor" aria-label="anchor" href="#efficiency-generating-partitions"></a>
</h2>
<p>Note, as of version <code>2.5.0</code>, one can generate partitions
in parallel using the <code>nThreads</code> argument.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## partitions of 60</span></span>
<span><span class="fu"><a href="../reference/partitionsCount.html">partitionsCount</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">60</span>, repetition <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 966467</span></span>
<span></span>
<span><span class="co">## Single threaded</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="../reference/partitionsGeneral.html">partitionsGeneral</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">60</span>, repetition <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    user  system elapsed </span></span>
<span><span class="co">#&gt;   0.025   0.013   0.038</span></span>
<span></span>
<span><span class="co">## Using nThreads</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="../reference/partitionsGeneral.html">partitionsGeneral</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">60</span>, repetition <span class="op">=</span> <span class="cn">TRUE</span>, nThreads<span class="op">=</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    user  system elapsed </span></span>
<span><span class="co">#&gt;   0.033   0.024   0.015</span></span>
<span></span>
<span></span>
<span><span class="co">## partitions of 120 into distinct parts</span></span>
<span><span class="fu"><a href="../reference/partitionsCount.html">partitionsCount</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">120</span>, freqs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">120</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">120</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 2194432</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="../reference/partitionsGeneral.html">partitionsGeneral</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">120</span>, freqs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">120</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">120</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    user  system elapsed </span></span>
<span><span class="co">#&gt;   0.020   0.007   0.027</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="../reference/partitionsGeneral.html">partitionsGeneral</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">120</span>, freqs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">120</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">120</span><span class="op">)</span><span class="op">)</span>, nThreads<span class="op">=</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    user  system elapsed </span></span>
<span><span class="co">#&gt;   0.023   0.007   0.008</span></span>
<span></span>
<span></span>
<span><span class="co">## partitions of 100 into parts of 15 with specific multiplicity</span></span>
<span><span class="fu"><a href="../reference/partitionsCount.html">partitionsCount</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">15</span>, freqs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">4</span><span class="op">:</span><span class="fl">8</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 6704215</span></span>
<span></span>
<span><span class="co">## Over 6 million in just over a second!</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="../reference/partitionsGeneral.html">partitionsGeneral</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">15</span>, freqs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">4</span><span class="op">:</span><span class="fl">8</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    user  system elapsed </span></span>
<span><span class="co">#&gt;   0.342   0.091   0.433</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="integer-compositions">Integer Compositions<a class="anchor" aria-label="anchor" href="#integer-compositions"></a>
</h2>
<p><a href="https://en.wikipedia.org/wiki/Composition_(combinatorics)" class="external-link">Compositions</a>
are related to integer partitions, however order matters. With
<code>RcppAlgos</code>, we generate standard compositions with
<code>compositionsGeneral</code>. Currently, the composition algorithms
are limited to a subset of cases of compositions with repetiion.</p>
<p>The output with <code>compositionGeneral</code> will be in
lexicographical order. When we set <code>weak = TRUE</code>, we will
obtain <strong><em>weak compositions</em></strong>, which allow for
zeros to be a part of the sequence (E.g.
<code>c(0, 0, 5), c(0, 5, 0), c(5, 0, 0)</code> are weak compositions of
5). As the Wikipedia article points out, we can increase the number of
zeros indefinitely when <code>weak = TRUE</code>.</p>
<p>For more general cases, we can make use of
<code>permuteGeneral</code>, keeping in mind that the output will not be
in lexicographical order. Another consideration with
<code>permuteGeneral</code> is that when we include zero, we will always
obtain weak compositions.</p>
<p>With that in mind, generating compositions with
<code>RcppAlgos</code> is easy, flexible, and quite efficient.</p>
<div class="section level3">
<h3 id="case-5-all-compositions-of-n">Case 5: All Compositions of <em>N</em><a class="anchor" aria-label="anchor" href="#case-5-all-compositions-of-n"></a>
</h3>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## See Case 1</span></span>
<span><span class="fu"><a href="../reference/partitionsGeneral.html">compositionsGeneral</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">3</span>, repetition <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span><span class="co">#&gt; [1,]    0    0    3</span></span>
<span><span class="co">#&gt; [2,]    0    1    2</span></span>
<span><span class="co">#&gt; [3,]    0    2    1</span></span>
<span><span class="co">#&gt; [4,]    1    1    1</span></span>
<span></span>
<span><span class="co">## Get weak compositions</span></span>
<span><span class="fu"><a href="../reference/partitionsGeneral.html">compositionsGeneral</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">3</span>, repetition <span class="op">=</span> <span class="cn">TRUE</span>, weak <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;       [,1] [,2] [,3]</span></span>
<span><span class="co">#&gt;  [1,]    0    0    3</span></span>
<span><span class="co">#&gt;  [2,]    0    1    2</span></span>
<span><span class="co">#&gt;  [3,]    0    2    1</span></span>
<span><span class="co">#&gt;  [4,]    0    3    0</span></span>
<span><span class="co">#&gt;  [5,]    1    0    2</span></span>
<span><span class="co">#&gt;  [6,]    1    1    1</span></span>
<span><span class="co">#&gt;  [7,]    1    2    0</span></span>
<span><span class="co">#&gt;  [8,]    2    0    1</span></span>
<span><span class="co">#&gt;  [9,]    2    1    0</span></span>
<span><span class="co">#&gt; [10,]    3    0    0</span></span>
<span></span>
<span><span class="co">## Get weak compositions with width &gt; than target</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="fu"><a href="../reference/partitionsGeneral.html">compositionsGeneral</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">10</span>, repetition <span class="op">=</span> <span class="cn">TRUE</span>, weak <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;        [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span></span>
<span><span class="co">#&gt; [215,]    2    0    0    0    0    1    0    0    0     0</span></span>
<span><span class="co">#&gt; [216,]    2    0    0    0    1    0    0    0    0     0</span></span>
<span><span class="co">#&gt; [217,]    2    0    0    1    0    0    0    0    0     0</span></span>
<span><span class="co">#&gt; [218,]    2    0    1    0    0    0    0    0    0     0</span></span>
<span><span class="co">#&gt; [219,]    2    1    0    0    0    0    0    0    0     0</span></span>
<span><span class="co">#&gt; [220,]    3    0    0    0    0    0    0    0    0     0</span></span>
<span></span>
<span><span class="co">## With permuteGeneral, we always get weak compositions, just</span></span>
<span><span class="co">## not in lexicographical order</span></span>
<span><span class="fu"><a href="../reference/combinatoricsGeneral.html">permuteGeneral</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">3</span>, repetition <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>               constraintFun <span class="op">=</span> <span class="st">"sum"</span>,</span>
<span>               comparisonFun <span class="op">=</span> <span class="st">"=="</span>, limitConstraints <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;       [,1] [,2] [,3]</span></span>
<span><span class="co">#&gt;  [1,]    0    0    3</span></span>
<span><span class="co">#&gt;  [2,]    0    3    0</span></span>
<span><span class="co">#&gt;  [3,]    3    0    0</span></span>
<span><span class="co">#&gt;  [4,]    0    1    2</span></span>
<span><span class="co">#&gt;  [5,]    0    2    1</span></span>
<span><span class="co">#&gt;  [6,]    1    0    2</span></span>
<span><span class="co">#&gt;  [7,]    1    2    0</span></span>
<span><span class="co">#&gt;  [8,]    2    0    1</span></span>
<span><span class="co">#&gt;  [9,]    2    1    0</span></span>
<span><span class="co">#&gt; [10,]    1    1    1</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="fu"><a href="../reference/combinatoricsGeneral.html">permuteGeneral</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">10</span>, repetition <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                    constraintFun <span class="op">=</span> <span class="st">"sum"</span>,</span>
<span>                    comparisonFun <span class="op">=</span> <span class="st">"=="</span>, limitConstraints <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;        [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span></span>
<span><span class="co">#&gt; [215,]    1    1    0    0    0    0    0    1    0     0</span></span>
<span><span class="co">#&gt; [216,]    1    1    0    0    0    0    1    0    0     0</span></span>
<span><span class="co">#&gt; [217,]    1    1    0    0    0    1    0    0    0     0</span></span>
<span><span class="co">#&gt; [218,]    1    1    0    0    1    0    0    0    0     0</span></span>
<span><span class="co">#&gt; [219,]    1    1    0    1    0    0    0    0    0     0</span></span>
<span><span class="co">#&gt; [220,]    1    1    1    0    0    0    0    0    0     0</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="case-6-compositions-of-n-of-length-m">Case 6: Compositions of <em>N</em> of Length <em>m</em><a class="anchor" aria-label="anchor" href="#case-6-compositions-of-n-of-length-m"></a>
</h3>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## See Case 2. N.B. weak = TRUE has no effect</span></span>
<span><span class="fu"><a href="../reference/partitionsGeneral.html">compositionsGeneral</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">3</span>, repetition <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;       [,1] [,2] [,3]</span></span>
<span><span class="co">#&gt;  [1,]    1    1    4</span></span>
<span><span class="co">#&gt;  [2,]    1    2    3</span></span>
<span><span class="co">#&gt;  [3,]    1    3    2</span></span>
<span><span class="co">#&gt;  [4,]    1    4    1</span></span>
<span><span class="co">#&gt;  [5,]    2    1    3</span></span>
<span><span class="co">#&gt;  [6,]    2    2    2</span></span>
<span><span class="co">#&gt;  [7,]    2    3    1</span></span>
<span><span class="co">#&gt;  [8,]    3    1    2</span></span>
<span><span class="co">#&gt;  [9,]    3    2    1</span></span>
<span><span class="co">#&gt; [10,]    4    1    1</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="case-7-compositions-of-n-into-distinct-parts">Case 7: Compositions of <em>N</em> into Distinct Parts<a class="anchor" aria-label="anchor" href="#case-7-compositions-of-n-into-distinct-parts"></a>
</h3>
<p>We must use <code>permuteGeneral</code> here.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/partitionsGeneral.html">compositionsGeneral</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error: Currently, there is no composition algorithm for this case.</span></span>
<span><span class="co">#&gt;  Use permuteCount, permuteIter, permuteGeneral, permuteSample, or</span></span>
<span><span class="co">#&gt;  permuteRank instead.</span></span>
<span></span>
<span><span class="co">## See Case 3</span></span>
<span><span class="fu"><a href="../reference/combinatoricsGeneral.html">permuteGeneral</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">3</span>,</span>
<span>               constraintFun <span class="op">=</span> <span class="st">"sum"</span>,</span>
<span>               comparisonFun <span class="op">=</span> <span class="st">"=="</span>, limitConstraints <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span><span class="co">#&gt; [1,]    1    2    3</span></span>
<span><span class="co">#&gt; [2,]    1    3    2</span></span>
<span><span class="co">#&gt; [3,]    2    1    3</span></span>
<span><span class="co">#&gt; [4,]    2    3    1</span></span>
<span><span class="co">#&gt; [5,]    3    1    2</span></span>
<span><span class="co">#&gt; [6,]    3    2    1</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="case-8-integer-compositions-of-n-into-parts-of-varying-multiplicity">Case 8: Integer Compositions of <em>N</em> into Parts of Varying
Multiplicity<a class="anchor" aria-label="anchor" href="#case-8-integer-compositions-of-n-into-parts-of-varying-multiplicity"></a>
</h3>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## compositions of 5 into 3 parts where each part can</span></span>
<span><span class="co">## be used a maximum of 2 times.</span></span>
<span><span class="fu"><a href="../reference/combinatoricsGeneral.html">permuteGeneral</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">3</span>, freqs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>               constraintFun <span class="op">=</span> <span class="st">"sum"</span>,</span>
<span>               comparisonFun <span class="op">=</span> <span class="st">"=="</span>,</span>
<span>               limitConstraints <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span><span class="co">#&gt; [1,]    1    1    3</span></span>
<span><span class="co">#&gt; [2,]    1    3    1</span></span>
<span><span class="co">#&gt; [3,]    3    1    1</span></span>
<span><span class="co">#&gt; [4,]    1    2    2</span></span>
<span><span class="co">#&gt; [5,]    2    1    2</span></span>
<span><span class="co">#&gt; [6,]    2    2    1</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="efficiency-generating-partitions-and-compositions">Efficiency Generating Partitions and Compositions<a class="anchor" aria-label="anchor" href="#efficiency-generating-partitions-and-compositions"></a>
</h2>
<p>With <code>compositionGeneral</code> we are able to take advantage of
parallel computation. With <code>permuteGeneral</code>, the parallel
options have no effect when generating compositions.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## compositions of 25</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="../reference/partitionsGeneral.html">compositionsGeneral</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">25</span>, repetition <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    user  system elapsed </span></span>
<span><span class="co">#&gt;   1.702   0.098   1.799</span></span>
<span></span>
<span><span class="fu"><a href="../reference/partitionsCount.html">compositionsCount</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">25</span>, repetition<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 16777216</span></span>
<span></span>
<span><span class="co">## Use multiple threads for greater efficiency. Generate</span></span>
<span><span class="co">## over 16 million compositions in under a second!</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="../reference/partitionsGeneral.html">compositionsGeneral</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">25</span>, repetition <span class="op">=</span> <span class="cn">TRUE</span>, nThreads <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    user  system elapsed </span></span>
<span><span class="co">#&gt;   1.854   0.102   0.546</span></span>
<span></span>
<span></span>
<span><span class="co">## weak compositions of 12 usnig nThreads = 4</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="va">weakComp12</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/partitionsGeneral.html">compositionsGeneral</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">12</span>, repetition <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                              weak <span class="op">=</span> <span class="cn">TRUE</span>, nThreads <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    user  system elapsed </span></span>
<span><span class="co">#&gt;   0.012   0.006   0.005</span></span>
<span></span>
<span><span class="co">## And using permuteGeneral</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="va">weakPerm12</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/combinatoricsGeneral.html">permuteGeneral</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">12</span>, <span class="fl">12</span>, repetition <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                         constraintFun <span class="op">=</span> <span class="st">"sum"</span>,</span>
<span>                                         comparisonFun <span class="op">=</span> <span class="st">"=="</span>,</span>
<span>                                         limitConstraints <span class="op">=</span> <span class="fl">12</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    user  system elapsed </span></span>
<span><span class="co">#&gt;   0.011   0.004   0.015</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">weakPerm12</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1352078      12</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">weakPerm12</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">order</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">weakPerm12</span><span class="op">)</span><span class="op">)</span>, <span class="op">]</span>,</span>
<span>          <span class="va">weakComp12</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span></span>
<span><span class="co">## General compositions with varying multiplicities</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="va">comp25_gen</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/combinatoricsGeneral.html">permuteGeneral</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">10</span>, freqs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">4</span><span class="op">:</span><span class="fl">8</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>                                         constraintFun <span class="op">=</span> <span class="st">"sum"</span>,</span>
<span>                                         comparisonFun <span class="op">=</span> <span class="st">"=="</span>,</span>
<span>                                         limitConstraints <span class="op">=</span> <span class="fl">25</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    user  system elapsed </span></span>
<span><span class="co">#&gt;   0.025   0.007   0.032</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">comp25_gen</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 946092     10</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="safely-interrupt-execution-with-cpp11check_user_interrupt">Safely Interrupt Execution with
<code>cpp11::check_user_interrupt</code><a class="anchor" aria-label="anchor" href="#safely-interrupt-execution-with-cpp11check_user_interrupt"></a>
</h2>
<p>Some of these operations can take some time, especially when you are
in the exploratory phase and you don’t have that much information about
what type of solution you will obtain. For this reason, we have added
the ability to interrupt execution. Under the hood, we call
<code>cpp11::check_user_interrupt()</code> once every second to check if
the user has requested for the process to be interrupted. Note that we
only check for user interruptions when we cannot determine the number of
results up front.</p>
<p>This means that if we initiate a process that will take a long time
or exhaust all of the available memory (e.g. we forget to put an upper
limit on the number of results, relax the tolerance, etc.), we can
simply hit <code>Ctrl + c</code>, or <code>esc</code> if using
<code>RStudio</code>, to stop execution.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">s</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1000</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Oops!! We forgot to limit the output/put a loose tolerance</span></span>
<span><span class="co">## There are as.numeric(comboCount(s, 20, T)) ~= 4.964324e+41</span></span>
<span><span class="co">## This will either take a long long time, or all of your</span></span>
<span><span class="co">## memory will be consumed!!!</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## No problem... simply hit Ctrl + c or if in RStudio, hit esc</span></span>
<span><span class="co">## or hit the "Stop" button</span></span>
<span></span>
<span><span class="co">##</span></span>
<span><span class="co">## system.time(testInterrupt &lt;- partitionsGeneral(s, 20, TRUE, target = 0))</span></span>
<span><span class="co">## Timing stopped at: 1.029 0.011 1.04</span></span>
<span><span class="co">##</span></span></code></pre></div>
<div class="section level3">
<h3 id="note-about-interrupting-execution">Note about Interrupting Execution<a class="anchor" aria-label="anchor" href="#note-about-interrupting-execution"></a>
</h3>
<p>Generally, we encourage user to use iterators (See <a href="https://jwood000.github.io/RcppAlgos/articles/CombinatoricsIterators.html" class="external-link">Combinatorial
Iterators in RcppAlgos</a>) as they offer greater flexibility. For
example, with iterators it is easy to avoid resource consuming calls by
only fetching a few results at a time.</p>
<p>Here is an example of how to investigate difficult problems due to
combinatorial explosion without fear of having to restart R.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## We use "s" defined above</span></span>
<span><span class="va">iter</span> <span class="op">=</span> <span class="fu"><a href="../reference/partitionsIterator.html">partitionsIter</a></span><span class="op">(</span><span class="va">s</span>, <span class="fl">20</span>, <span class="cn">TRUE</span>, target <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Test one iteration to see if we need to relax the tolerance</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="va">iter</span><span class="op">@</span><span class="va">nextIter</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    user  system elapsed </span></span>
<span><span class="co">#&gt;   5.194   0.021   5.216</span></span>
<span></span>
<span><span class="co">## 8 seconds per iteration is a bit much... Let's loosen things</span></span>
<span><span class="co">## a little by increasing the tolerance from sqrt(.Machine$double.eps)</span></span>
<span><span class="co">## ~= 1.49e-8 to 1e-5.</span></span>
<span><span class="va">relaxedIter</span> <span class="op">=</span> <span class="fu"><a href="../reference/partitionsIterator.html">partitionsIter</a></span><span class="op">(</span><span class="va">s</span>, <span class="fl">20</span>, <span class="cn">TRUE</span>, target <span class="op">=</span> <span class="fl">0</span>, tolerance <span class="op">=</span> <span class="fl">1e-5</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="va">relaxedIter</span><span class="op">@</span><span class="va">nextIter</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    user  system elapsed </span></span>
<span><span class="co">#&gt;       0       0       0</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Joseph Wood.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
