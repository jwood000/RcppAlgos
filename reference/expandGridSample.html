<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Sample the Cartesian Product — expandGridSample • RcppAlgos</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Sample the Cartesian Product — expandGridSample"><meta property="og:description" content="
Generate a specific (lexicographically) or random sample of the Cartesian product of the input vectors.
Produce results in parallel using the nThreads arguments.
GMP support allows for exploration where the number of results is large.

"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RcppAlgos</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.9.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/CombinatorialSampling.html">Combinatorial Sampling and Ranking</a>
    </li>
    <li>
      <a href="../articles/CombinatoricsIterators.html">Combinatorial Iterators in RcppAlgos</a>
    </li>
    <li>
      <a href="../articles/CombPermConstraints.html">Constraints, Partitions, and Compositions</a>
    </li>
    <li>
      <a href="../articles/ComputationalMathematics.html">Computational Mathematics Overview</a>
    </li>
    <li>
      <a href="../articles/GeneralCombinatorics.html">Combination and Permutation Basics</a>
    </li>
    <li>
      <a href="../articles/HighPerformanceBenchmarks.html">High Performance Benchmarks</a>
    </li>
    <li>
      <a href="../articles/OtherCombinatorics.html">Cartesian Products and Partitions of Groups</a>
    </li>
    <li>
      <a href="../articles/SubsetSum.html">Attacking Problems Related to the Subset Sum Problem</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/jwood000/RcppAlgos/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Sample the Cartesian Product</h1>

    <div class="hidden name"><code>expandGridSample.Rd</code></div>
    </div>

    <div class="ref-description">
    <p></p><ul><li><p>Generate a specific (lexicographically) or random sample of the Cartesian product of the input vectors.</p></li>
<li><p>Produce results in parallel using the <code>nThreads</code> arguments.</p></li>
<li><p>GMP support allows for exploration where the number of results is large.</p></li>
</ul></div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">expandGridSample</span><span class="op">(</span></span>
<span>    <span class="va">...</span>, n <span class="op">=</span> <span class="cn">NULL</span>, sampleVec <span class="op">=</span> <span class="cn">NULL</span>, seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    nThreads <span class="op">=</span> <span class="cn">NULL</span>, namedSample <span class="op">=</span> <span class="cn">FALSE</span>, return_df <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <p></p>
<dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>vectors, factors or a list containing these. (See <code><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">?expand.grid</a></code>).</p></dd>

  <dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>Number of results to return. The default is <code>NULL</code>.</p></dd>

  <dt id="arg-samplevec">sampleVec<a class="anchor" aria-label="anchor" href="#arg-samplevec"></a></dt>
<dd><p>A vector of numbers representing the lexicographical partition of groups to return. Accepts vectors of class <code>bigz</code> as well as vectors of characters</p></dd>

  <dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>Random seed initialization. The default is <code>NULL</code>. N.B. If the gmp library is needed, this parameter must be set in order to have reproducible results (<em>E.g</em> <code><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed()</a></code> has no effect in these cases).</p></dd>

  <dt id="arg-nthreads">nThreads<a class="anchor" aria-label="anchor" href="#arg-nthreads"></a></dt>
<dd><p>Specific number of threads to be used. The default is <code>NULL</code>.</p></dd>

  <dt id="arg-namedsample">namedSample<a class="anchor" aria-label="anchor" href="#arg-namedsample"></a></dt>
<dd><p>Logical flag. If <code>TRUE</code>, <code>rownames</code> corresponding to the lexicographical result, will be added to the returned matrix. The default is <code>FALSE</code>.</p></dd>

  <dt id="arg-return-df">return_df<a class="anchor" aria-label="anchor" href="#arg-return-df"></a></dt>
<dd><p>Logical flag to force the output to be a <code>data.frame</code>. The default is <code>FALSE</code>.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>These algorithms rely on efficiently generating the \(n^{th}\) lexicographical result.</p>
    </div>
    <div id="value">
    <h2>Value</h2>
    <p>When all of the input is of the same type, by default <code>expandGridSample</code> produces a <code>matrix</code> (a <code>data.frame</code> otherwise). This can be ignored by setting the argument <code>return_df = TRUE</code>.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p><a href="https://en.wikipedia.org/wiki/Lexicographical_order" class="external-link">Lexicographical order</a></p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Joseph Wood</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## input vectors</span></span></span>
<span class="r-in"><span><span class="va">lst</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">state.abb</span><span class="op">)</span>, <span class="va">euro</span>, <span class="va">islands</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## generate 10 random products</span></span></span>
<span class="r-in"><span><span class="fu">expandGridSample</span><span class="op">(</span><span class="va">lst</span>, n <span class="op">=</span> <span class="fl">10</span>, seed <span class="op">=</span> <span class="fl">123</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Var1       Var2 Var3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    OK 1936.27000  306</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    OK   40.33990  306</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    WV    6.55957   13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    CO 1936.27000   73</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    AR    6.55957   30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    WI 1936.27000   29</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    CT    5.94573   25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8    MN   13.76030   33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9    GA   13.76030   84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10   IL   40.33990  227</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## using sampleVec to generate specific results</span></span></span>
<span class="r-in"><span><span class="fu">expandGridSample</span><span class="op">(</span><span class="va">lst</span>, sampleVec <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">100</span>, <span class="fl">1e3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Var1     Var2  Var3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   AL 13.76030 11506</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   AL  1.95583  2968</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   AK  2.20371    16</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="fu">expandGridSample</span><span class="op">(</span><span class="va">lst</span>, sampleVec <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="expandGridCount.html">expandGridCount</a></span><span class="op">(</span><span class="va">lst</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>         <span class="fu"><a href="expandGrid.html">expandGrid</a></span><span class="op">(</span><span class="va">lst</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Examples with enormous number of total results</span></span></span>
<span class="r-in"><span><span class="va">big_lst</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/funprog.html" class="external-link">Map</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="va">x</span><span class="op">:</span><span class="va">y</span>, <span class="fl">8</span><span class="op">:</span><span class="fl">33</span>, <span class="fl">15</span><span class="op">:</span><span class="fl">40</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">num</span> <span class="op">=</span> <span class="fu"><a href="expandGridCount.html">expandGridCount</a></span><span class="op">(</span><span class="va">big_lst</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">gmp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gmp/man/add.biginteger.html" class="external-link">log2.bigz</a></span><span class="op">(</span><span class="va">num</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 78</span>
<span class="r-in"><span><span class="co">## [1] 78</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">first</span> <span class="op">=</span> <span class="fu">gmp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gmp/man/biginteger.rand.html" class="external-link">urand.bigz</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">1</span>, size <span class="op">=</span> <span class="fl">78</span>, seed <span class="op">=</span> <span class="fl">123</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Seed initialisation</span>
<span class="r-in"><span><span class="va">mySamp</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">c</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">10</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">gmp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gmp/man/add.biginteger.html" class="external-link">add.bigz</a></span><span class="op">(</span><span class="va">first</span>, <span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">mySamp</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "bigz"</span>
<span class="r-in"><span><span class="co">## [1] "bigz"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## using the sampling function</span></span></span>
<span class="r-in"><span><span class="va">cartSamp</span> <span class="op">=</span> <span class="fu">expandGridSample</span><span class="op">(</span><span class="va">big_lst</span>, sampleVec <span class="op">=</span> <span class="va">mySamp</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## using the standard function</span></span></span>
<span class="r-in"><span><span class="va">cartGeneral</span> <span class="op">=</span> <span class="fu"><a href="expandGrid.html">expandGrid</a></span><span class="op">(</span><span class="va">big_lst</span>,</span></span>
<span class="r-in"><span>                         lower <span class="op">=</span> <span class="va">first</span>,</span></span>
<span class="r-in"><span>                         upper <span class="op">=</span> <span class="fu">gmp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gmp/man/add.biginteger.html" class="external-link">add.bigz</a></span><span class="op">(</span><span class="va">first</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">cartSamp</span>, <span class="va">cartGeneral</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="co">## [1] TRUE</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Joseph Wood.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

