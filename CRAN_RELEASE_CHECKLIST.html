<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>CRAN Release Checklist (RcppAlgos) • RcppAlgos</title><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="CRAN Release Checklist (RcppAlgos)"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">RcppAlgos</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.9.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="articles/CombinatorialSampling.html">Combinatorial Sampling and Ranking</a></li>
    <li><a class="dropdown-item" href="articles/CombinatoricsIterators.html">Combinatorial Iterators in RcppAlgos</a></li>
    <li><a class="dropdown-item" href="articles/CombPermConstraints.html">Constraints, Partitions, and Compositions</a></li>
    <li><a class="dropdown-item" href="articles/ComputationalMathematics.html">Computational Mathematics Overview</a></li>
    <li><a class="dropdown-item" href="articles/GeneralCombinatorics.html">Combination and Permutation Basics</a></li>
    <li><a class="dropdown-item" href="articles/HighPerformanceBenchmarks.html">High Performance Benchmarks</a></li>
    <li><a class="dropdown-item" href="articles/OtherCombinatorics.html">Cartesian Products and Partitions of Groups</a></li>
    <li><a class="dropdown-item" href="articles/SubsetSum.html">Attacking Problems Related to the Subset Sum Problem</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jwood000/RcppAlgos/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>CRAN Release Checklist (RcppAlgos)</h1>
      <small class="dont-index">Source: <a href="https://github.com/jwood000/RcppAlgos/blob/main/CRAN_RELEASE_CHECKLIST.md" class="external-link"><code>CRAN_RELEASE_CHECKLIST.md</code></a></small>
    </div>

<div id="cran-release-checklist-rcppalgos" class="section level1">

<p>This checklist is optimized for small patch releases and CRAN pretests (CITATION readability, URL validity, clean tarball contents).</p>
<hr><div class="section level2">
<h2 id="id_0-before-you-start">0) Before you start<a class="anchor" aria-label="anchor" href="#id_0-before-you-start"></a></h2>
<ul class="task-list"><li><label><input type="checkbox">Confirm you are on a clean release branch (no WIP for the next large release).</label></li>
<li><label><input type="checkbox"><code>git status</code> is clean (or only includes intentional release edits).</label></li>
<li>
<label><input type="checkbox">Review staged changes (ignore pkgdown output as needed):</label>
<ul class="task-list"><li><label><input type="checkbox"><code>git diff --stat</code></label></li>
<li><label><input type="checkbox"><code>git diff &lt;prev_tag&gt;..HEAD -- . ':(exclude)docs'</code></label></li>
</ul></li>
</ul><hr></div>
<div class="section level2">
<h2 id="id_1-versioning--changelog">1) Versioning + changelog<a class="anchor" aria-label="anchor" href="#id_1-versioning--changelog"></a></h2>
<ul class="task-list"><li><label><input type="checkbox">Bump version in <code>DESCRIPTION</code> (e.g., <code>2.9.4</code> → <code>2.9.5</code>).</label></li>
<li><label><input type="checkbox">Update <code>NEWS.md</code> with a new top entry.</label></li>
<li><label><input type="checkbox">Update <code>man/NEWS.Rd</code> (if shipped) to match <code>NEWS.md</code>.</label></li>
</ul><hr></div>
<div class="section level2">
<h2 id="id_2-citation-cran-incoming-pretest-requirement">2) CITATION (CRAN incoming pretest requirement)<a class="anchor" aria-label="anchor" href="#id_2-citation-cran-incoming-pretest-requirement"></a></h2>
<ul class="task-list"><li><label><input type="checkbox">Update <code>inst/CITATION</code>.</label></li>
<li><label><input type="checkbox">Ensure <code>inst/CITATION</code> contains <strong>no dynamic calls</strong> that require the package to be installed/available (e.g., no <code><a href="https://rdrr.io/r/utils/packageDescription.html" class="external-link">packageVersion()</a></code>, <code><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date()</a></code>, <code><a href="https://rdrr.io/r/utils/packageDescription.html" class="external-link">utils::packageDescription()</a></code>, <code><a href="https://rdrr.io/r/utils/citation.html" class="external-link">citation()</a></code>, etc.).</label></li>
<li><label><input type="checkbox">Ensure URLs are canonical (e.g., trailing slashes where applicable).</label></li>
<li>
<label><input type="checkbox">Local verification:</label>
<ul class="task-list"><li><label><input type="checkbox"><code>R -q -e "tools::checkRdaFiles('.')"</code> (optional)</label></li>
<li>
<label><input type="checkbox">Build + check tarball (see section 5) and confirm no:</label>
<ul><li>“Reading CITATION file fails … when package is not installed.”</li>
</ul></li>
</ul></li>
</ul><hr></div>
<div class="section level2">
<h2 id="id_3-urls--metadata">3) URLs + metadata<a class="anchor" aria-label="anchor" href="#id_3-urls--metadata"></a></h2>
<ul class="task-list"><li>
<label><input type="checkbox">Run URL checks (fix true errors):</label>
<ul class="task-list"><li><label><input type="checkbox"><code>R -q -e "urlchecker::url_check()"</code></label></li>
</ul></li>
<li>
<label><input type="checkbox">Fix:</label>
<ul class="task-list"><li><label><input type="checkbox">Invalid fragments (bad <code>#...</code> URLs)</label></li>
<li><label><input type="checkbox">True 404s</label></li>
<li><label><input type="checkbox">Permanent redirects (301) by switching to canonical URL (often add trailing slash)</label></li>
</ul></li>
<li>
<label><input type="checkbox">Confirm <code>DESCRIPTION</code> includes canonical URLs (pkgdown + GitHub), e.g.:</label>
<ul class="task-list"><li><label><input type="checkbox"><code>URL: https://jwood000.github.io/RcppAlgos/, https://github.com/jwood000/RcppAlgos</code></label></li>
<li><label><input type="checkbox"><code>BugReports: https://github.com/jwood000/RcppAlgos/issues</code></label></li>
</ul></li>
</ul><hr></div>
<div class="section level2">
<h2 id="id_4-build-hygiene-rbuildignore">4) Build hygiene (.Rbuildignore)<a class="anchor" aria-label="anchor" href="#id_4-build-hygiene-rbuildignore"></a></h2>
<ul class="task-list"><li>
<label><input type="checkbox">Ensure non-package files are excluded in <code>.Rbuildignore</code>, at minimum:</label>
<ul class="task-list"><li><label><input type="checkbox"><code>^docs$</code> (pkgdown output)</label></li>
<li><label><input type="checkbox"><code>^_pkgdown\.yml$</code></label></li>
<li><label><input type="checkbox"><code>^CRAN_RELEASE_CHECKLIST\.md$</code></label></li>
<li><label><input type="checkbox">Any local tooling directories (e.g., <code>^ai_git_helpers$</code>)</label></li>
</ul></li>
<li><label><input type="checkbox">Confirm <code>R CMD build</code> tarball does not include website/config extras.</label></li>
</ul><hr></div>
<div class="section level2">
<h2 id="id_5-local-checks-must-be-clean">5) Local checks (must be clean)<a class="anchor" aria-label="anchor" href="#id_5-local-checks-must-be-clean"></a></h2>
<p>Run checks from a clean state.</p>
<ul class="task-list"><li><label><input type="checkbox"><code>R CMD build .</code></label></li>
<li><label><input type="checkbox"><code>R CMD check RcppAlgos_&lt;version&gt;.tar.gz --as-cran</code></label></li>
</ul><p>Verify: - [ ] No ERRORs or WARNINGs. - [ ] Any NOTEs are understood/acceptable (avoid new NOTES if possible). - [ ] In particular: - [ ] CITATION readable in incoming feasibility checks - [ ] No invalid URLs (especially malformed GitHub links) - [ ] No new “non-standard file/directory found at top level”</p>
<hr></div>
<div class="section level2">
<h2 id="id_6-pkgdown-site-optional-for-cran-recommended-for-releases">6) pkgdown site (optional for CRAN, recommended for releases)<a class="anchor" aria-label="anchor" href="#id_6-pkgdown-site-optional-for-cran-recommended-for-releases"></a></h2>
<p>If maintaining the site for each release:</p>
<ul class="task-list"><li><label><input type="checkbox">Update <code>_pkgdown.yml</code> as needed (bootstrap, url).</label></li>
<li><label><input type="checkbox"><code>R -q -e "pkgdown::build_site()"</code></label></li>
<li><label><input type="checkbox">Commit site output under <code>docs/</code> (if that is the repo policy).</label></li>
<li><label><input type="checkbox">If pkgdown warns about missing alt text, consider fixing in README/vignettes.</label></li>
</ul><hr></div>
<div class="section level2">
<h2 id="id_7-external-builders">7) External builders<a class="anchor" aria-label="anchor" href="#id_7-external-builders"></a></h2>
<ul class="task-list"><li>
<label><input type="checkbox">Win-builder:</label>
<ul class="task-list"><li><label><input type="checkbox">devel</label></li>
<li><label><input type="checkbox">release</label></li>
<li><label><input type="checkbox">oldrelease</label></li>
</ul></li>
<li>
<label><input type="checkbox">(Recommended) CI matrix / GitHub Actions:</label>
<ul class="task-list"><li><label><input type="checkbox">at least Linux + macOS</label></li>
<li><label><input type="checkbox">include r-devel somewhere if practical</label></li>
</ul></li>
</ul><hr></div>
<div class="section level2">
<h2 id="id_8-final-review--tagging">8) Final review + tagging<a class="anchor" aria-label="anchor" href="#id_8-final-review--tagging"></a></h2>
<ul class="task-list"><li>
<label><input type="checkbox">Review final diff (excluding docs):</label>
<ul class="task-list"><li><label><input type="checkbox"><code>git diff &lt;prev_tag&gt;..HEAD -- . ':(exclude)docs'</code></label></li>
</ul></li>
<li>
<label><input type="checkbox">Confirm <code>DESCRIPTION</code> fields (at least):</label>
<ul class="task-list"><li><label><input type="checkbox"><code>Version</code></label></li>
<li><label><input type="checkbox"><code>URL</code> (canonical)</label></li>
<li><label><input type="checkbox"><code>BugReports</code></label></li>
</ul></li>
<li>
<label><input type="checkbox">Create release tag:</label>
<ul class="task-list"><li><label><input type="checkbox"><code>git tag -a v&lt;version&gt; -m "CRAN patch release &lt;version&gt;"</code></label></li>
<li><label><input type="checkbox"><code>git push --tags</code></label></li>
</ul></li>
</ul><hr></div>
<div class="section level2">
<h2 id="id_9-cran-submission">9) CRAN submission<a class="anchor" aria-label="anchor" href="#id_9-cran-submission"></a></h2>
<ul class="task-list"><li>
<label><input type="checkbox">Prepare <code>cran-comments.md</code> (if used), include:</label>
<ul class="task-list"><li><label><input type="checkbox">Summary of changes</label></li>
<li><label><input type="checkbox">Any NOTE explanations (if any remain)</label></li>
<li><label><input type="checkbox">Mention that CITATION/URL issues from incoming pretests were corrected</label></li>
</ul></li>
<li><label><input type="checkbox">Submit via <code>devtools::submit_cran()</code> or CRAN web form.</label></li>
</ul><hr></div>
<div class="section level2">
<h2 id="quick-commands-copypaste">Quick commands (copy/paste)<a class="anchor" aria-label="anchor" href="#quick-commands-copypaste"></a></h2>
<div class="section level3">
<h3 id="diff-ignoring-pkgdown-output">Diff ignoring pkgdown output<a class="anchor" aria-label="anchor" href="#diff-ignoring-pkgdown-output"></a></h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">git</span> diff <span class="op">&lt;</span>old<span class="op">&gt;</span> <span class="op">&lt;</span>new<span class="op">&gt;</span> -- . <span class="st">':(exclude)docs'</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="build--check">Build + check<a class="anchor" aria-label="anchor" href="#build--check"></a></h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">R</span> CMD build .</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="ex">R</span> CMD check RcppAlgos_<span class="pp">*</span>.tar.gz <span class="at">--as-cran</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="url-check">URL check<a class="anchor" aria-label="anchor" href="#url-check"></a></h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">urlchecker</span><span class="fu">::</span><span class="fu">url_check</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="pkgdown">pkgdown<a class="anchor" aria-label="anchor" href="#pkgdown"></a></h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pkgdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgdown.r-lib.org/reference/build_site.html" class="external-link">build_site</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="docker-ubsan-r-devel-ubsan-clang-sanity-check-recommended-for-c-changes">Docker UBSan (r-devel-ubsan-clang) sanity check (recommended for C++ changes)<a class="anchor" aria-label="anchor" href="#docker-ubsan-r-devel-ubsan-clang-sanity-check-recommended-for-c-changes"></a></h2>
<p>This is a quick way to catch undefined behavior (UB) that may not show up in regular checks. Uses the rocker image: <code>rocker/r-devel-ubsan-clang</code>.</p>
<div class="section level3">
<h3 id="id_1-start-docker">1) Start Docker<a class="anchor" aria-label="anchor" href="#id_1-start-docker"></a></h3>
<ul class="task-list"><li><label><input type="checkbox">Open Docker Desktop and ensure it is running.</label></li>
</ul></div>
<div class="section level3">
<h3 id="id_2-run-the-container-mount-repo">2) Run the container (mount repo)<a class="anchor" aria-label="anchor" href="#id_2-run-the-container-mount-repo"></a></h3>
<blockquote>
<p><code>--rm</code> removes the container when you exit; the repo is mounted in.</p>
</blockquote>
<div class="sourceCode" id="cb5"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--platform</span> linux/amd64 <span class="at">-m</span><span class="op">=</span>10g <span class="at">--cap-add</span> SYS_PTRACE <span class="dt">\</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>  <span class="at">--name</span><span class="op">=</span>r-devel-ubsan-clang <span class="dt">\</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>  <span class="at">-v</span> ~/RcppAlgos:/RSource/RcppAlgos <span class="dt">\</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>  <span class="at">--rm</span> <span class="at">-ti</span> rocker/r-devel-ubsan-clang /bin/bash</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="id_3-install-system-deps-inside-container">3) Install system deps (inside container)<a class="anchor" aria-label="anchor" href="#id_3-install-system-deps-inside-container"></a></h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">apt-get</span> update</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="ex">apt-get</span> install <span class="at">-y</span> libgmp3-dev</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="id_4-install-r-deps-inside-container">4) Install R deps (inside container)<a class="anchor" aria-label="anchor" href="#id_4-install-r-deps-inside-container"></a></h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">R</span> <span class="at">-e</span> <span class="st">'install.packages(c("cpp11","gmp","testthat","microbenchmark","numbers","partitions"), repos="https://cloud.r-project.org")'</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="ex">R</span> <span class="at">-e</span> <span class="st">'install.packages("RcppBigIntAlgos", repos="https://cloud.r-project.org")'</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="id_5-build--check-package-inside-container">5) Build + check package (inside container)<a class="anchor" aria-label="anchor" href="#id_5-build--check-package-inside-container"></a></h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">R</span> CMD build /RSource/RcppAlgos</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="ex">Rdevel</span> CMD check <span class="at">--no-examples</span> <span class="at">--no-vignettes</span> RcppAlgos_<span class="pp">*</span>.tar.gz</span></code></pre></div>
<p>Notes:</p>
<ul><li>Use <code>--no-examples --no-vignettes</code> for speed. Remove these flags when debugging vignette/example-related issues.</li>
<li>If you are investigating memory/UB issues deeply, consider running without <code>--no-vignettes</code> to widen coverage.</li>
</ul><hr></div>
</div>
<div class="section level2">
<h2 id="debugging-ubsan-traces-addr2line">Debugging UBSan traces (addr2line)<a class="anchor" aria-label="anchor" href="#debugging-ubsan-traces-addr2line"></a></h2>
<p>Sometimes UBSan prints stack frames with offsets into the shared object, e.g.:</p>
<p><code>/RcppAlgos.Rcheck/RcppAlgos/libs/RcppAlgos.so+0x3034db</code></p>
<p>You can map these offsets back to source lines using <code>addr2line</code>.</p>
<div class="section level3">
<h3 id="id_1-locate-the-compiled-shared-object-and-the-offset">1) Locate the compiled shared object and the offset<a class="anchor" aria-label="anchor" href="#id_1-locate-the-compiled-shared-object-and-the-offset"></a></h3>
<p>Example:</p>
<ul><li>SO: <code>/RcppAlgos.Rcheck/RcppAlgos/libs/RcppAlgos.so</code>
</li>
<li>Offset: <code>0x3034db</code>
</li>
</ul></div>
<div class="section level3">
<h3 id="id_2-convert-offset-to-fileline">2) Convert offset to <a href="file:line" class="uri">file:line</a>
<a class="anchor" aria-label="anchor" href="#id_2-convert-offset-to-fileline"></a></h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">addr2line</span> <span class="at">-e</span> /RcppAlgos.Rcheck/RcppAlgos/libs/RcppAlgos.so <span class="at">-f</span> <span class="at">-C</span> 0x3034db</span></code></pre></div>
<p>Recommended:</p>
<ul><li>
<code>-f</code> prints function name</li>
<li>
<code>-C</code> demangles C++ symbols</li>
</ul></div>
<div class="section level3">
<h3 id="id_3-if-symbolization-is-missing--warnings-appear">3) If symbolization is missing / warnings appear<a class="anchor" aria-label="anchor" href="#id_3-if-symbolization-is-missing--warnings-appear"></a></h3>
<p>If you see messages like: <code>WARNING: Failed to use and restart external symbolizer!</code></p>
<p>Try installing/ensuring LLVM symbolizer tools are present, then re-run. (Exact package names can vary across base images.)</p>
</div>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Joseph Wood.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

